(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[707],{50307:function(ue,T,n){"use strict";n.d(T,{EQ:function(){return $},VO:function(){return re},Yu:function(){return J},GP:function(){return S}});var Y=n(10971),x=n(69076),X=["https://livedb.asoulfan.com","https://raw.githubusercontent.com/peterpei1186861238/A-Soul-Database/main","https://cdn.jsdelivr.net/gh/peterpei1186861238/A-Soul-Database@latest"],z=0;T.ZP={RunOnLocal:z!==0,sourceUrl:X[z]};var Q=["scene","staff","type"];function $(a,r){{var c=new Set,_=(0,x.Z)(r.staff),k;try{for(_.s();!(k=_.n()).done;){var o=k.value;if(o!=="F"){var A=(0,x.Z)(r.skin[o]),b;try{for(A.s();!(b=A.n()).done;){var ae=b.value;c.add(ae)}}catch(E){A.e(E)}finally{A.f()}}}}catch(E){_.e(E)}finally{_.f()}var R=Array.from(c);if(R.length!==0&&!L(a.skin,R))return!1}if(a.platform.indexOf(r.platform)===-1)return!1;var K=(0,x.Z)(Q),V;try{for(K.s();!(V=K.n()).done;){var q=V.value;if(!L(a[q],r[q]))return!1}}catch(E){K.e(E)}finally{K.f()}if(a.titlestr===""&&a.tagstr===""&&a.typestr===""||r.title.toLowerCase().indexOf(a.titlestr.toLowerCase())!==-1)return!0;{var y=(0,x.Z)(r.tags),W;try{for(y.s();!(W=y.n()).done;){var ee=W.value;if(ee.toLowerCase().indexOf(a.tagstr.toLowerCase())!==-1)return!0}}catch(E){y.e(E)}finally{y.f()}}{var Z=(0,x.Z)(r.items),F;try{for(Z.s();!(F=Z.n()).done;){var te=F.value,I=(0,x.Z)(te.item),G;try{for(I.s();!(G=I.n()).done;){var ne=G.value;if(ne[0].toLowerCase().indexOf(a.typestr.toLowerCase())!==-1)return!0}}catch(E){I.e(E)}finally{I.f()}}}catch(E){Z.e(E)}finally{Z.f()}}return!1}function re(a){var r=new XMLHttpRequest;r.open("GET",a,!1),r.send(null);var c;try{c=JSON.parse(r.responseText)}catch(_){c={title:"error"}}finally{return c}}function J(a){var r=new XMLHttpRequest;r.open("GET",a,!1),r.send(null);var c;try{c=r.responseText}catch(_){c="error http"}finally{return c}}function S(a){for(var r=[],c=a.length-1;c>=0;c--)r.push(a[c]);return r}function L(a,r){return a.length+r.length!==Array.from(new Set([].concat((0,Y.Z)(a),(0,Y.Z)(r)))).length}},26472:function(ue,T,n){"use strict";n.r(T);var Y=n(15629),x=n(55778),X=n(906),z=n(52645),Q=n(91298),$=n(69076),re=n(14013),J=n(41023),S=n(51548),L=n(46893),a=n(37150),r=n(65473),c=n(17051),_=n(4701),k=n(52916),o=n(34636),A=n(6575),b=n(41277),ae=n(76664),R=n(52212),K=n(77981),V=n(98478),q=n(97594),y=n(8238),W=n(59301),ee=n(47221),Z=n(59848),F=n(31443),te=n(18679),I=n(24281),G=n(96060),ne=n(60775),E=n.n(ne),C=n(50307),ce=n(28064),he=n(26710),e=n(37712),ye=y.Z.Group,Ze=V.Z.Panel,Ie=R.Z.Meta,se=b.Z.Title,ve=b.Z.Text,U=C.ZP.sourceUrl,Ee=(0,C.VO)(U+"/db/2021/search.json"),P=(0,C.VO)(U+"/db/2021/main.json"),fe=(0,C.VO)(U+"/db/2021/indexer.json"),De="yellow";function me(h){var f=fe.indexOf(h);if(P[f].bv!=h)return console.error("indexer.json don't match mainJson in bv fileds, index: "+f),new Array;var d=1,u="";try{d=parseInt(P[f].clip),u=P[f].date.split("-")[0]}catch(H){console.error("clip and month parse fault in bv: "+h)}if(u===""||d===0)return new Array;u.length===1&&(u="0"+u);for(var t=new Array(d),l=0;l<d;l++)t[l]=[];if(d===1){var s="",i=U+"/db/2021/"+u+"/srt/"+h+".srt";try{s=(0,C.Yu)(i)}catch(H){return console.error("Get subtitles fault on url: "+i),t[0].push("||"),t}for(var m=s.split(`
`),D=0;D<m.length-2;D+=4){var O=m[D]+"|"+m[D+1]+"|"+m[D+2];t[0].push(O)}}else for(var v=1;v<d+1;v++){var M="",g=U+"/db/2021/"+u+"/srt/"+h+"-"+v.toString()+".srt";try{M=(0,C.Yu)(g)}catch(H){console.error("Get subtitles fault on url: "+g),t[v-1].push("||");continue}for(var B=M.split(`
`),p=0;p<B.length-2;p+=4){var N=B[p]+"|"+B[p+1]+"|"+B[p+2];t[v-1].push(N)}}return t}var w=[];for(var j in P){var le=void 0,oe=void 0,ie=void 0,_e=void 0;try{le=P[j].title,oe=P[j].bv,ie=P[j].date,_e=P[j].time}catch(h){console.error("mainJson parse fault for n: "+j)}w.push({key:j,date:ie,hour:_e,bv:oe,title:le})}w=(0,C.GP)(w);var pe=[{title:"\u65E5\u671F",width:80,dataIndex:"date"},{title:"\u65F6\u95F4",width:80,dataIndex:"hour"},{title:"BV\u53F7",width:80,dataIndex:"bv",render:function(f){return(0,e.jsx)("a",{href:"https://www.bilibili.com/"+f,target:"_blank",onClick:function(u){u.stopPropagation()},children:f})}},{title:"\u6807\u9898",dataIndex:"title",render:function(f){return(0,e.jsx)(_.Z,{children:(0,e.jsx)(o.Z,{md:12,children:f})})}}],xe=function(h){(0,a.Z)(d,h);var f=(0,r.Z)(d);function d(u){var t;return(0,S.Z)(this,d),t=f.call(this,u),t.state={input:""},t.handleSearch=function(l){t.props.parent.handleSearch(t.state.input)},t.handleClear=function(l){t.setState({input:""});var s=t.props.parent.props.initDatasrc;t.props.parent.setState({dataSource:s,searchWords:"",currentID:0})},t.handleReverse=function(l){t.props.parent.handleReverse()},t}return(0,L.Z)(d,[{key:"render",value:function(){var t=this;return(0,e.jsxs)(R.Z,{onKeyDown:function(s){s.keyCode===13&&t.handleSearch(s)},actions:[(0,e.jsx)(Z.Z,{title:"\u9006\u5E8F",onClick:this.handleReverse}),(0,e.jsx)(F.Z,{title:"\u6E05\u9664\u9009\u62E9",onClick:this.handleClear}),(0,e.jsx)(te.Z,{title:"\u641C\u7D22",onClick:this.handleSearch})],children:[(0,e.jsx)(_.Z,{children:(0,e.jsx)(o.Z,{xs:24,md:24,align:"middle",children:(0,e.jsx)(se,{level:2,children:"\u5B57\u5E55\u5E93\u68C0\u7D22"})})}),(0,e.jsxs)(_.Z,{style:{height:"50px"},children:[(0,e.jsx)(o.Z,{xs:0,md:6}),(0,e.jsx)(o.Z,{xs:24,md:12,align:"middle",children:(0,e.jsx)(J.Z,{style:{borderRadius:"50px"},placeholder:"\u5355\u6761\u5B57\u5E55\u68C0\u7D22\u{1F50D}",onChange:function(s){t.setState({input:s.target.value})},value:this.state.input})}),(0,e.jsx)(o.Z,{md:6,align:"middle"})]})]})}}]),d}(W.Component),Ce=function(h){(0,a.Z)(d,h);var f=(0,r.Z)(d);function d(u){var t;return(0,S.Z)(this,d),t=f.call(this,u),t.state={dataSource:t.props.initDatasrc,isModalVisible:!1,displayBV:"",searchWords:"",currentID:0},t.handleCancel=function(){t.scrollTop(),t.setState({isModalVisible:!1,currentID:0})},t.handleSearch=function(l){t.setState({searchWords:l});var s=[],i=(0,$.Z)(t.props.initDatasrc),m;try{for(i.s();!(m=i.n()).done;){var D=m.value,O=D.bv,v=void 0;try{v=Ee[O].srt}catch(M){continue}v.toLowerCase().indexOf(l.toLowerCase())!==-1&&s.push(D)}}catch(M){i.e(M)}finally{i.f()}t.setState({dataSource:s})},t.scrollTop=function(){var l=document.getElementById("Table-top");l.scrollIntoView({behavior:"auto"})},t.scrollNext=function(l){var s=document.getElementsByClassName(l);if(s.length!==0){var i=t.state.currentID;s[i].scrollIntoView({behavior:"smooth"}),i>=s.length-1?t.setState({currentID:0}):t.setState({currentID:i+1})}},t.scrollPre=function(l){var s=document.getElementsByClassName(l);if(s.length!=0){var i=t.state.currentID;s[i].scrollIntoView({behavior:"smooth"}),i<=0?t.setState({currentID:s.length-1}):t.setState({currentID:i-1})}},t}return(0,L.Z)(d,[{key:"handleReverse",value:function(){var t=(0,C.GP)(this.state.dataSource);this.setState({dataSource:t})}},{key:"render",value:function(){var t=this,l=this.state,s=l.isModalVisible,i=l.displayBV,m=l.searchWords,D=[];return i!==""&&(D=me(i)),(0,e.jsxs)(ee.ZP,{children:[(0,e.jsx)(xe,{parent:this}),(0,e.jsx)(_.Z,{style:{marginTop:"20px"},children:(0,e.jsx)(o.Z,{xs:24,md:24,children:(0,e.jsx)(ce.ZP,{columns:this.props.initColumns,rowKey:"key",dataSource:this.state.dataSource,search:!1,onRow:function(v){return{onClick:function(g){t.setState({isModalVisible:!0,displayBV:v.bv})},style:{cursor:"pointer"}}}})})}),(0,e.jsxs)(Q.Z,{id:"modal",visible:s,maskClosable:!0,onCancel:this.handleCancel,footer:null,children:[(0,e.jsx)(_.Z,{children:(0,e.jsx)(o.Z,{xs:24,md:24,align:"middle",children:(0,e.jsx)(se,{children:"\u5B57\u5E55\u8868"})})}),(0,e.jsx)(_.Z,{children:(0,e.jsx)(o.Z,{children:(0,e.jsxs)("a",{onClick:function(){return t.scrollPre("active-highlight")},children:[(0,e.jsx)(I.Z,{}),"\u4E0A\u4E00\u6761\u641C\u7D22\u7ED3\u679C"]})})}),(0,e.jsx)(_.Z,{children:(0,e.jsx)(o.Z,{children:(0,e.jsxs)("a",{onClick:function(){return t.scrollNext("active-highlight")},children:[(0,e.jsx)(G.Z,{}),"\u4E0B\u4E00\u6761\u641C\u7D22\u7ED3\u679C"]})})}),(0,e.jsxs)(_.Z,{children:[(0,e.jsx)(o.Z,{xs:3,md:3,children:"\u5E8F\u53F7"}),(0,e.jsx)(o.Z,{xs:10,md:10,children:"\u65F6\u95F4"}),(0,e.jsx)(o.Z,{xs:11,md:11,children:"\u5B57\u5E55"})]}),(0,e.jsx)(_.Z,{style:{borderBottom:"2px solid"},children:(0,e.jsx)(ve,{type:"secondary",children:"\u5B57\u5E55\u641C\u7D22\u7ED3\u679C\u4F1A\u4EE5\u9AD8\u4EAE\u5C55\u793A\uFF0C\u7528\u6309\u952E\u4E0A\u4E0B\u79FB\u52A8\u5427\u{1F483}\u{1F483}\u{1F483}"})}),(0,e.jsx)(_.Z,{children:(0,e.jsx)(o.Z,{span:24,style:{height:"500px",overflowY:"scroll"},children:D.map(function(O,v){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(_.Z,{children:(0,e.jsx)(o.Z,{style:{color:"#9AC8E2",borderBottom:"1px solid"},id:"Table-top",children:(0,e.jsx)("a",{target:"_blank",href:"https://www.bilibili.com/"+i+"?p="+(v+1),children:"\u5207\u7247"+(v+1)})})}),(0,e.jsx)(e.Fragment,{children:O.map(function(M){var g=M.split("|"),B=g[0],p=g[1],N=g[2],H=parseInt(p.split("-->")[0].split(":")[0]),Pe=parseInt(p.split("-->")[0].split(":")[1]),Oe=parseInt(p.split("-->")[0].split(":")[2].split(",")[0]),Me=(H*3600+60*Pe+Oe)*1e3,ge="https://www.bilibili.com/"+i+"?p="+(v+1)+"&start_progress="+Me,de="";return N.toLowerCase().indexOf(m.toLowerCase())!==-1&&(de="active-highlight"),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(_.Z,{style:{borderBottom:"1px dashed"},className:de,children:[(0,e.jsx)(o.Z,{xs:3,md:3,style:{color:"#B8A6D9"},children:B}),(0,e.jsx)(o.Z,{xs:10,md:10,children:(0,e.jsx)("a",{target:"_blank",href:ge,children:p})}),(0,e.jsx)(o.Z,{xs:11,md:11,style:{color:"#E799B0"},children:(0,e.jsx)(E(),{highlightStyle:{backgroundColor:De,padding:0},searchWords:[m],autoEscape:!0,textToHighlight:N})})]})})})})]})})})})]})]})}}]),d}(W.Component);T.default=function(){var h={initColumns:pe,initDatasrc:w};return(0,e.jsx)(x.ZP,{locale:he.Z,children:(0,e.jsx)(Ce,(0,X.Z)({},h))})}}}]);
