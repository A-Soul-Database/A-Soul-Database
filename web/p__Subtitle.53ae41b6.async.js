(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[707],{40132:function(_e,I,a){"use strict";a.d(I,{EQ:function(){return X},VO:function(){return ae},Yu:function(){return z},GP:function(){return U}});var G=a(86582),P=a(91220),H=["https://livedb.asoulfan.com","https://raw.githubusercontent.com/peterpei1186861238/A-Soul-Database/main"],w=0;I.ZP={RunOnLocal:w!==0,sourceUrl:H[w]};var Y=["scene","staff","type"];function X(s,n){{var d=new Set,_=(0,P.Z)(n.staff),Q;try{for(_.s();!(Q=_.n()).done;){var o=Q.value;if(o!=="F"){var y=(0,P.Z)(n.skin[o]),j;try{for(y.s();!(j=y.n()).done;){var ne=j.value;d.add(ne)}}catch(c){y.e(c)}finally{y.f()}}}}catch(c){_.e(c)}finally{_.f()}var A=Array.from(d);if(A.length!==0&&!B(s.skin,A))return!1}if(s.platform.indexOf(n.platform)===-1)return!1;var T=(0,P.Z)(Y),W;try{for(T.s();!(W=T.n()).done;){var $=W.value;if(!B(s[$],n[$]))return!1}}catch(c){T.e(c)}finally{T.f()}if(s.titlestr===""&&s.tagstr===""&&s.typestr===""||n.title.toLowerCase().indexOf(s.titlestr.toLowerCase())!==-1)return!0;{var p=(0,P.Z)(n.tags),L;try{for(p.s();!(L=p.n()).done;){var J=L.value;if(J.toLowerCase().indexOf(s.tagstr.toLowerCase())!==-1)return!0}}catch(c){p.e(c)}finally{p.f()}}{var g=(0,P.Z)(n.items),S;try{for(g.s();!(S=g.n()).done;){var k=S.value,Z=(0,P.Z)(k.item),V;try{for(Z.s();!(V=Z.n()).done;){var q=V.value;if(q[0].toLowerCase().indexOf(s.typestr.toLowerCase())!==-1)return!0}}catch(c){Z.e(c)}finally{Z.f()}}}catch(c){g.e(c)}finally{g.f()}}return!1}function ae(s){var n=new XMLHttpRequest;n.open("GET",s,!1),n.send(null);var d;try{d=JSON.parse(n.responseText)}catch(_){d={title:"error"}}finally{return d}}function z(s){var n=new XMLHttpRequest;n.open("GET",s,!1),n.send(null);var d;try{d=n.responseText}catch(_){d="error http"}finally{return d}}function U(s){for(var n=[],d=s.length-1;d>=0;d--)n.push(s[d]);return n}function B(s,n){return s.length+n.length!==Array.from(new Set([].concat((0,G.Z)(s),(0,G.Z)(n)))).length}},50205:function(_e,I,a){"use strict";a.r(I);var G=a(84305),P=a(69224),H=a(11849),w=a(71194),Y=a(5644),X=a(91220),ae=a(47673),z=a(4107),U=a(69610),B=a(54941),s=a(81306),n=a(72936),d=a(13062),_=a(71230),Q=a(89032),o=a(15746),y=a(402),j=a(3887),ne=a(58024),A=a(39144),T=a(7359),W=a(27279),$=a(63185),p=a(9676),L=a(67294),J=a(67265),g=a(258),S=a(72850),k=a(76570),Z=a(7091),V=a(44378),q=a(37763),c=a.n(q),O=a(40132),ie=a(14032),ue=a(96486),Ie=a.n(ue),de=a(82925),e=a(85893),Be=p.Z.Group,ye=W.Z.Panel,je=A.Z.Meta,se=j.Z.Title,he=j.Z.Text,b=O.ZP.sourceUrl,re=(0,O.VO)(b+"/db/2021/search.json"),R=(0,O.VO)(b+"/db/2021/main.json"),ee=(0,O.VO)(b+"/db/2021/indexer.json"),ce="yellow";function Ee(E){var v=ee.indexOf(E),u=parseInt(R[v].clip),h=R[v].date.split("-")[0];h.length===1&&(h="0"+h);for(var t=new Array(u),l=0;l<u;l++)t[l]=[];if(u===1)for(var i=(0,O.Yu)(b+"/db/2021/"+h+"/srt/"+E+".srt"),r=i.split(`
`),D=0;D<r.length-2;D+=4){var M=r[D]+"|"+r[D+1]+"|"+r[D+2];t[0].push(M)}else for(var f=1;f<u+1;f++)for(var C=(0,O.Yu)(b+"/db/2021/"+h+"/srt/"+E+"-"+f.toString()+".srt"),x=C.split(`
`),m=0;m<x.length-2;m+=4){var te=x[m]+"|"+x[m+1]+"|"+x[m+2];t[f-1].push(te)}return t}var F=[];for(var K in ee){var ve=re[ee[K]].title,De=R[K].bv,fe=R[K].date,me=R[K].time;F.push({key:K,date:fe,hour:me,bv:De,title:ve})}F=(0,O.GP)(F);var Ce=[{title:"\u65E5\u671F",width:80,dataIndex:"date"},{title:"\u65F6\u95F4",width:80,dataIndex:"hour"},{title:"BV\u53F7",width:80,dataIndex:"bv",render:function(v){return(0,e.jsx)("a",{href:"https://www.bilibili.com/"+v,target:"_blank",onClick:function(h){h.stopPropagation()},children:v})}},{title:"\u6807\u9898",dataIndex:"title",render:function(v){return(0,e.jsx)(_.Z,{children:(0,e.jsx)(o.Z,{md:12,children:v})})}}],xe=function(E){(0,s.Z)(u,E);var v=(0,n.Z)(u);function u(h){var t;return(0,U.Z)(this,u),t=v.call(this,h),t.state={input:""},t.handleSearch=function(l){t.props.parent.handleSearch(t.state.input)},t.handleClear=function(l){t.setState({input:""}),t.props.parent.handleSearch("")},t.handleReverse=function(l){t.props.parent.handleReverse()},t}return(0,B.Z)(u,[{key:"render",value:function(){var t=this;return(0,e.jsxs)(A.Z,{onKeyDown:function(i){i.keyCode===13&&t.handleSearch(i)},actions:[(0,e.jsx)(g.Z,{title:"\u9006\u5E8F",onClick:this.handleReverse}),(0,e.jsx)(S.Z,{title:"\u6E05\u9664\u9009\u62E9",onClick:this.handleClear}),(0,e.jsx)(k.Z,{title:"\u641C\u7D22",onClick:this.handleSearch})],children:[(0,e.jsx)(_.Z,{children:(0,e.jsx)(o.Z,{xs:24,md:24,align:"middle",children:(0,e.jsx)(se,{level:2,children:"\u5B57\u5E55\u5E93\u68C0\u7D22"})})}),(0,e.jsxs)(_.Z,{style:{height:"50px"},children:[(0,e.jsx)(o.Z,{xs:0,md:6}),(0,e.jsx)(o.Z,{xs:24,md:12,align:"middle",children:(0,e.jsx)(z.Z,{style:{borderRadius:"50px"},placeholder:"\u5355\u6761\u5B57\u5E55\u68C0\u7D22\u{1F50D}",onChange:function(i){t.setState({input:i.target.value})},value:this.state.input})}),(0,e.jsx)(o.Z,{md:6,align:"middle"})]})]})}}]),u}(L.Component),Pe=function(E){(0,s.Z)(u,E);var v=(0,n.Z)(u);function u(h){var t;return(0,U.Z)(this,u),t=v.call(this,h),t.state={dataSource:t.props.initDatasrc,isModalVisible:!1,displayBV:"",searchWords:"",currentID:0},t.handleCancel=function(){t.scrollTop(),t.setState({isModalVisible:!1,currentID:0})},t.handleSearch=function(l){t.setState({searchWords:l});var i=[],r=(0,X.Z)(t.props.initDatasrc),D;try{for(r.s();!(D=r.n()).done;){var M=D.value,f=M.bv,C=re[f].srt;C.toLowerCase().indexOf(l.toLowerCase())!==-1&&i.push(M)}}catch(x){r.e(x)}finally{r.f()}t.setState({dataSource:i})},t.scrollTop=function(){var l=document.getElementById("Table-top");l.scrollIntoView({behavior:"auto"})},t.scrollNext=function(l){var i=document.getElementsByClassName(l);if(i.length!==0){var r=t.state.currentID;i[r].scrollIntoView({behavior:"smooth"}),r>=i.length-1?t.setState({currentID:0}):t.setState({currentID:r+1})}},t.scrollPre=function(l){var i=document.getElementsByClassName(l);if(i.length!=0){var r=t.state.currentID;i[r].scrollIntoView({behavior:"smooth"}),r<=0?t.setState({currentID:i.length-1}):t.setState({currentID:r-1})}},t}return(0,B.Z)(u,[{key:"handleReverse",value:function(){var t=(0,O.GP)(this.state.dataSource);this.setState({dataSource:t})}},{key:"render",value:function(){var t=this,l=this.state,i=l.isModalVisible,r=l.displayBV,D=l.searchWords,M=[];return r!==""&&(M=Ee(r)),(0,e.jsxs)(J.ZP,{children:[(0,e.jsx)(xe,{parent:this}),(0,e.jsx)(_.Z,{style:{marginTop:"20px"},children:(0,e.jsx)(o.Z,{xs:24,md:24,children:(0,e.jsx)(ie.ZP,{columns:this.props.initColumns,rowKey:"key",dataSource:this.state.dataSource,search:!1,onRow:function(C){return{onClick:function(m){t.setState({isModalVisible:!0,displayBV:C.bv})},style:{cursor:"pointer"}}}})})}),(0,e.jsxs)(Y.Z,{id:"modal",visible:i,maskClosable:!0,onCancel:this.handleCancel,footer:null,children:[(0,e.jsx)(_.Z,{children:(0,e.jsx)(o.Z,{xs:24,md:24,align:"middle",children:(0,e.jsx)(se,{children:"\u5B57\u5E55\u8868"})})}),(0,e.jsx)(_.Z,{children:(0,e.jsx)(o.Z,{children:(0,e.jsxs)("a",{onClick:function(){return t.scrollPre("active-highlight")},children:[(0,e.jsx)(Z.Z,{}),"\u4E0A\u4E00\u6761\u641C\u7D22\u7ED3\u679C"]})})}),(0,e.jsx)(_.Z,{children:(0,e.jsx)(o.Z,{children:(0,e.jsxs)("a",{onClick:function(){return t.scrollNext("active-highlight")},children:[(0,e.jsx)(V.Z,{}),"\u4E0B\u4E00\u6761\u641C\u7D22\u7ED3\u679C"]})})}),(0,e.jsxs)(_.Z,{children:[(0,e.jsx)(o.Z,{xs:3,md:3,children:"\u5E8F\u53F7"}),(0,e.jsx)(o.Z,{xs:10,md:10,children:"\u65F6\u95F4"}),(0,e.jsx)(o.Z,{xs:11,md:11,children:"\u5B57\u5E55"})]}),(0,e.jsx)(_.Z,{style:{borderBottom:"2px solid"},children:(0,e.jsx)(he,{type:"secondary",children:"\u5B57\u5E55\u641C\u7D22\u7ED3\u679C\u4F1A\u4EE5\u9AD8\u4EAE\u5C55\u793A\uFF0C\u7528\u6309\u952E\u4E0A\u4E0B\u79FB\u52A8\u5427\u{1F483}\u{1F483}\u{1F483}"})}),(0,e.jsx)(_.Z,{children:(0,e.jsx)(o.Z,{span:24,style:{height:"500px",overflowY:"scroll"},children:M.map(function(f,C){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(_.Z,{children:(0,e.jsx)(o.Z,{style:{color:"#9AC8E2",borderBottom:"1px solid"},id:"Table-top",children:(0,e.jsx)("a",{target:"_blank",href:"https://www.bilibili.com/"+r+"?p="+(C+1),children:"\u5207\u7247"+(C+1)})})}),(0,e.jsx)(e.Fragment,{children:f.map(function(x){var m=x.split("|"),te=m[0],N=m[1],le=m[2],Oe=parseInt(N.split("-->")[0].split(":")[0]),Me=parseInt(N.split("-->")[0].split(":")[1]),pe=parseInt(N.split("-->")[0].split(":")[2].split(",")[0]),ge=Oe*3600+60*Me+pe,Ze="https://www.bilibili.com/"+r+"?p="+(C+1)+"&t="+ge,oe="";return le.toLowerCase().indexOf(D.toLowerCase())!==-1&&(oe="active-highlight"),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(_.Z,{style:{borderBottom:"1px dashed"},className:oe,children:[(0,e.jsx)(o.Z,{xs:3,md:3,style:{color:"#B8A6D9"},children:te}),(0,e.jsx)(o.Z,{xs:10,md:10,children:(0,e.jsx)("a",{target:"_blank",href:Ze,children:N})}),(0,e.jsx)(o.Z,{xs:11,md:11,style:{color:"#E799B0"},children:(0,e.jsx)(c(),{highlightStyle:{backgroundColor:ce,padding:0},searchWords:[D],autoEscape:!0,textToHighlight:le})})]})})})})]})})})})]})]})}}]),u}(L.Component);I.default=function(){var E={initColumns:Ce,initDatasrc:F};return(0,e.jsx)(P.ZP,{locale:de.Z,children:(0,e.jsx)(Pe,(0,H.Z)({},E))})}}}]);
