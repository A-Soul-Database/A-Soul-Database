(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[707],{40132:function(ue,B,a){"use strict";a.d(B,{EQ:function(){return X},VO:function(){return te},Yu:function(){return z},GP:function(){return W}});var G=a(86582),P=a(91220),H=["https://livedb.asoulfan.com","https://raw.githubusercontent.com/peterpei1186861238/A-Soul-Database/main"],w=0;B.ZP={RunOnLocal:w!==0,sourceUrl:H[w]};var Y=["scene","staff","type"];function X(s,n){{var d=new Set,i=(0,P.Z)(n.staff),Q;try{for(i.s();!(Q=i.n()).done;){var _=Q.value;if(_!=="F"){var A=(0,P.Z)(n.skin[_]),T;try{for(A.s();!(T=A.n()).done;){var ae=T.value;d.add(ae)}}catch(h){A.e(h)}finally{A.f()}}}}catch(h){i.e(h)}finally{i.f()}var L=Array.from(d);if(L.length!==0&&!j(s.skin,L))return!1}if(s.platform.indexOf(n.platform)===-1)return!1;var b=(0,P.Z)(Y),U;try{for(b.s();!(U=b.n()).done;){var $=U.value;if(!j(s[$],n[$]))return!1}}catch(h){b.e(h)}finally{b.f()}if(s.titlestr===""&&s.tagstr===""&&s.typestr===""||n.title.toLowerCase().indexOf(s.titlestr.toLowerCase())!==-1)return!0;{var g=(0,P.Z)(n.tags),R;try{for(g.s();!(R=g.n()).done;){var J=R.value;if(J.toLowerCase().indexOf(s.tagstr.toLowerCase())!==-1)return!0}}catch(h){g.e(h)}finally{g.f()}}{var Z=(0,P.Z)(n.items),S;try{for(Z.s();!(S=Z.n()).done;){var k=S.value,I=(0,P.Z)(k.item),V;try{for(I.s();!(V=I.n()).done;){var q=V.value;if(q[0].toLowerCase().indexOf(s.typestr.toLowerCase())!==-1)return!0}}catch(h){I.e(h)}finally{I.f()}}}catch(h){Z.e(h)}finally{Z.f()}}return!1}function te(s){var n=new XMLHttpRequest;n.open("GET",s,!1),n.send(null);var d;try{d=JSON.parse(n.responseText)}catch(i){d={title:"error"}}finally{return d}}function z(s){var n=new XMLHttpRequest;n.open("GET",s,!1),n.send(null);var d;try{d=n.responseText}catch(i){d="error http"}finally{return d}}function W(s){for(var n=[],d=s.length-1;d>=0;d--)n.push(s[d]);return n}function j(s,n){return s.length+n.length!==Array.from(new Set([].concat((0,G.Z)(s),(0,G.Z)(n)))).length}},50205:function(ue,B,a){"use strict";a.r(B);var G=a(84305),P=a(69224),H=a(11849),w=a(71194),Y=a(5644),X=a(91220),te=a(47673),z=a(4107),W=a(69610),j=a(54941),s=a(81306),n=a(72936),d=a(13062),i=a(71230),Q=a(89032),_=a(15746),A=a(402),T=a(3887),ae=a(58024),L=a(39144),b=a(7359),U=a(27279),$=a(63185),g=a(9676),R=a(67294),J=a(67265),Z=a(258),S=a(72850),k=a(76570),I=a(7091),V=a(44378),q=a(37763),h=a.n(q),O=a(40132),de=a(14032),ce=a(96486),Ie=a.n(ce),he=a(82925),e=a(85893),ye=g.Z.Group,Be=U.Z.Panel,je=L.Z.Meta,ne=T.Z.Title,ve=T.Z.Text,K=O.ZP.sourceUrl,Ee=(0,O.VO)(K+"/db/2021/search.json"),p=(0,O.VO)(K+"/db/2021/main.json"),De=(0,O.VO)(K+"/db/2021/indexer.json"),fe="yellow";function me(v){var E=De.indexOf(v),u=parseInt(p[E].clip),c=p[E].date.split("-")[0];c.length===1&&(c="0"+c);for(var t=new Array(u),l=0;l<u;l++)t[l]=[];if(u===1)for(var o=(0,O.Yu)(K+"/db/2021/"+c+"/srt/"+v+".srt"),r=o.split(`
`),D=0;D<r.length-2;D+=4){var M=r[D]+"|"+r[D+1]+"|"+r[D+2];t[0].push(M)}else for(var f=1;f<u+1;f++)for(var m=(0,O.Yu)(K+"/db/2021/"+c+"/srt/"+v+"-"+f.toString()+".srt"),C=m.split(`
`),x=0;x<C.length-2;x+=4){var ee=C[x]+"|"+C[x+1]+"|"+C[x+2];t[f-1].push(ee)}return t}var F=[];for(var y in p){var se=void 0,re=void 0,le=void 0,oe=void 0;try{se=p[y].title,re=p[y].bv,le=p[y].date,oe=p[y].time}catch(v){console.error("mainJson parse fault for n: "+y)}F.push({key:y,date:le,hour:oe,bv:re,title:se})}F=(0,O.GP)(F);var Ce=[{title:"\u65E5\u671F",width:80,dataIndex:"date"},{title:"\u65F6\u95F4",width:80,dataIndex:"hour"},{title:"BV\u53F7",width:80,dataIndex:"bv",render:function(E){return(0,e.jsx)("a",{href:"https://www.bilibili.com/"+E,target:"_blank",onClick:function(c){c.stopPropagation()},children:E})}},{title:"\u6807\u9898",dataIndex:"title",render:function(E){return(0,e.jsx)(i.Z,{children:(0,e.jsx)(_.Z,{md:12,children:E})})}}],xe=function(v){(0,s.Z)(u,v);var E=(0,n.Z)(u);function u(c){var t;return(0,W.Z)(this,u),t=E.call(this,c),t.state={input:""},t.handleSearch=function(l){t.props.parent.handleSearch(t.state.input)},t.handleClear=function(l){t.setState({input:""});var o=t.props.parent.props.initDatasrc;t.props.parent.setState({dataSource:o,searchWords:"",currentID:0})},t.handleReverse=function(l){t.props.parent.handleReverse()},t}return(0,j.Z)(u,[{key:"render",value:function(){var t=this;return(0,e.jsxs)(L.Z,{onKeyDown:function(o){o.keyCode===13&&t.handleSearch(o)},actions:[(0,e.jsx)(Z.Z,{title:"\u9006\u5E8F",onClick:this.handleReverse}),(0,e.jsx)(S.Z,{title:"\u6E05\u9664\u9009\u62E9",onClick:this.handleClear}),(0,e.jsx)(k.Z,{title:"\u641C\u7D22",onClick:this.handleSearch})],children:[(0,e.jsx)(i.Z,{children:(0,e.jsx)(_.Z,{xs:24,md:24,align:"middle",children:(0,e.jsx)(ne,{level:2,children:"\u5B57\u5E55\u5E93\u68C0\u7D22"})})}),(0,e.jsxs)(i.Z,{style:{height:"50px"},children:[(0,e.jsx)(_.Z,{xs:0,md:6}),(0,e.jsx)(_.Z,{xs:24,md:12,align:"middle",children:(0,e.jsx)(z.Z,{style:{borderRadius:"50px"},placeholder:"\u5355\u6761\u5B57\u5E55\u68C0\u7D22\u{1F50D}",onChange:function(o){t.setState({input:o.target.value})},value:this.state.input})}),(0,e.jsx)(_.Z,{md:6,align:"middle"})]})]})}}]),u}(R.Component),Pe=function(v){(0,s.Z)(u,v);var E=(0,n.Z)(u);function u(c){var t;return(0,W.Z)(this,u),t=E.call(this,c),t.state={dataSource:t.props.initDatasrc,isModalVisible:!1,displayBV:"",searchWords:"",currentID:0},t.handleCancel=function(){t.scrollTop(),t.setState({isModalVisible:!1,currentID:0})},t.handleSearch=function(l){t.setState({searchWords:l});var o=[],r=(0,X.Z)(t.props.initDatasrc),D;try{for(r.s();!(D=r.n()).done;){var M=D.value,f=M.bv,m=void 0;try{m=Ee[f].srt}catch(C){continue}m.toLowerCase().indexOf(l.toLowerCase())!==-1&&o.push(M)}}catch(C){r.e(C)}finally{r.f()}t.setState({dataSource:o})},t.scrollTop=function(){var l=document.getElementById("Table-top");l.scrollIntoView({behavior:"auto"})},t.scrollNext=function(l){var o=document.getElementsByClassName(l);if(o.length!==0){var r=t.state.currentID;o[r].scrollIntoView({behavior:"smooth"}),r>=o.length-1?t.setState({currentID:0}):t.setState({currentID:r+1})}},t.scrollPre=function(l){var o=document.getElementsByClassName(l);if(o.length!=0){var r=t.state.currentID;o[r].scrollIntoView({behavior:"smooth"}),r<=0?t.setState({currentID:o.length-1}):t.setState({currentID:r-1})}},t}return(0,j.Z)(u,[{key:"handleReverse",value:function(){var t=(0,O.GP)(this.state.dataSource);this.setState({dataSource:t})}},{key:"render",value:function(){var t=this,l=this.state,o=l.isModalVisible,r=l.displayBV,D=l.searchWords,M=[];return r!==""&&(M=me(r)),(0,e.jsxs)(J.ZP,{children:[(0,e.jsx)(xe,{parent:this}),(0,e.jsx)(i.Z,{style:{marginTop:"20px"},children:(0,e.jsx)(_.Z,{xs:24,md:24,children:(0,e.jsx)(de.ZP,{columns:this.props.initColumns,rowKey:"key",dataSource:this.state.dataSource,search:!1,onRow:function(m){return{onClick:function(x){t.setState({isModalVisible:!0,displayBV:m.bv})},style:{cursor:"pointer"}}}})})}),(0,e.jsxs)(Y.Z,{id:"modal",visible:o,maskClosable:!0,onCancel:this.handleCancel,footer:null,children:[(0,e.jsx)(i.Z,{children:(0,e.jsx)(_.Z,{xs:24,md:24,align:"middle",children:(0,e.jsx)(ne,{children:"\u5B57\u5E55\u8868"})})}),(0,e.jsx)(i.Z,{children:(0,e.jsx)(_.Z,{children:(0,e.jsxs)("a",{onClick:function(){return t.scrollPre("active-highlight")},children:[(0,e.jsx)(I.Z,{}),"\u4E0A\u4E00\u6761\u641C\u7D22\u7ED3\u679C"]})})}),(0,e.jsx)(i.Z,{children:(0,e.jsx)(_.Z,{children:(0,e.jsxs)("a",{onClick:function(){return t.scrollNext("active-highlight")},children:[(0,e.jsx)(V.Z,{}),"\u4E0B\u4E00\u6761\u641C\u7D22\u7ED3\u679C"]})})}),(0,e.jsxs)(i.Z,{children:[(0,e.jsx)(_.Z,{xs:3,md:3,children:"\u5E8F\u53F7"}),(0,e.jsx)(_.Z,{xs:10,md:10,children:"\u65F6\u95F4"}),(0,e.jsx)(_.Z,{xs:11,md:11,children:"\u5B57\u5E55"})]}),(0,e.jsx)(i.Z,{style:{borderBottom:"2px solid"},children:(0,e.jsx)(ve,{type:"secondary",children:"\u5B57\u5E55\u641C\u7D22\u7ED3\u679C\u4F1A\u4EE5\u9AD8\u4EAE\u5C55\u793A\uFF0C\u7528\u6309\u952E\u4E0A\u4E0B\u79FB\u52A8\u5427\u{1F483}\u{1F483}\u{1F483}"})}),(0,e.jsx)(i.Z,{children:(0,e.jsx)(_.Z,{span:24,style:{height:"500px",overflowY:"scroll"},children:M.map(function(f,m){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(i.Z,{children:(0,e.jsx)(_.Z,{style:{color:"#9AC8E2",borderBottom:"1px solid"},id:"Table-top",children:(0,e.jsx)("a",{target:"_blank",href:"https://www.bilibili.com/"+r+"?p="+(m+1),children:"\u5207\u7247"+(m+1)})})}),(0,e.jsx)(e.Fragment,{children:f.map(function(C){var x=C.split("|"),ee=x[0],N=x[1],_e=x[2],Oe=parseInt(N.split("-->")[0].split(":")[0]),pe=parseInt(N.split("-->")[0].split(":")[1]),Me=parseInt(N.split("-->")[0].split(":")[2].split(",")[0]),ge=Oe*3600+60*pe+Me,Ze="https://www.bilibili.com/"+r+"?p="+(m+1)+"&t="+ge,ie="";return _e.toLowerCase().indexOf(D.toLowerCase())!==-1&&(ie="active-highlight"),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(i.Z,{style:{borderBottom:"1px dashed"},className:ie,children:[(0,e.jsx)(_.Z,{xs:3,md:3,style:{color:"#B8A6D9"},children:ee}),(0,e.jsx)(_.Z,{xs:10,md:10,children:(0,e.jsx)("a",{target:"_blank",href:Ze,children:N})}),(0,e.jsx)(_.Z,{xs:11,md:11,style:{color:"#E799B0"},children:(0,e.jsx)(h(),{highlightStyle:{backgroundColor:fe,padding:0},searchWords:[D],autoEscape:!0,textToHighlight:_e})})]})})})})]})})})})]})]})}}]),u}(R.Component);B.default=function(){var v={initColumns:Ce,initDatasrc:F};return(0,e.jsx)(P.ZP,{locale:he.Z,children:(0,e.jsx)(Pe,(0,H.Z)({},v))})}}}]);
