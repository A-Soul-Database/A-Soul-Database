(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[707],{24905:function(se,Z,t){"use strict";t.d(Z,{EQ:function(){return z},VO:function(){return te},Yu:function(){return Q},GP:function(){return W}});var H=t(4402),C=t(22183),Y=["https://livedb.asoulfan.com","https://raw.githubusercontent.com/peterpei1186861238/A-Soul-Database/main"],N=0;Z.ZP={RunOnLocal:N!==0,sourceUrl:Y[N]};var X=["scene","staff","type"];function z(r,n){{var o=new Set,_=(0,C.Z)(n.staff),$;try{for(_.s();!($=_.n()).done;){var s=$.value;if(s!=="F"){var y=(0,C.Z)(n.skin[s]),A;try{for(y.s();!(A=y.n()).done;){var ae=A.value;o.add(ae)}}catch(h){y.e(h)}finally{y.f()}}}}catch(h){_.e(h)}finally{_.f()}var T=Array.from(o);if(T.length!==0&&!B(r.skin,T))return!1}if(r.platform.indexOf(n.platform)===-1)return!1;var I=(0,C.Z)(X),j;try{for(I.s();!(j=I.n()).done;){var w=j.value;if(!B(r[w],n[w]))return!1}}catch(h){I.e(h)}finally{I.f()}if(r.titlestr===""&&r.tagstr===""&&r.typestr===""||n.title.toLowerCase().indexOf(r.titlestr.toLowerCase())!==-1)return!0;{var p=(0,C.Z)(n.tags),L;try{for(p.s();!(L=p.n()).done;){var J=L.value;if(J.toLowerCase().indexOf(r.tagstr.toLowerCase())!==-1)return!0}}catch(h){p.e(h)}finally{p.f()}}{var b=(0,C.Z)(n.items),S;try{for(b.s();!(S=b.n()).done;){var k=S.value,g=(0,C.Z)(k.item),F;try{for(g.s();!(F=g.n()).done;){var f=F.value;if(f[0].toLowerCase().indexOf(r.typestr.toLowerCase())!==-1)return!0}}catch(h){g.e(h)}finally{g.f()}}}catch(h){b.e(h)}finally{b.f()}}return!1}function te(r){var n=new XMLHttpRequest;n.open("GET",r,!1),n.send(null);var o;try{o=JSON.parse(n.responseText)}catch(_){o={title:"error"}}finally{return o}}function Q(r){var n=new XMLHttpRequest;n.open("GET",r,!1),n.send(null);var o;try{o=n.responseText}catch(_){o="error http"}finally{return o}}function W(r){for(var n=[],o=r.length-1;o>=0;o--)n.push(r[o]);return n}function B(r,n){return r.length+n.length!==Array.from(new Set([].concat((0,H.Z)(r),(0,H.Z)(n)))).length}},24339:function(se,Z,t){"use strict";t.r(Z);var H=t(15629),C=t(55778),Y=t(17208),N=t(52645),X=t(91298),z=t(22183),te=t(14013),Q=t(41023),W=t(14765),B=t(67917),r=t(97414),n=t(68319),o=t(17051),_=t(4701),$=t(52916),s=t(34636),y=t(6575),A=t(65789),ae=t(76664),T=t(52212),I=t(77981),j=t(58176),w=t(97594),p=t(8238),L=t(59301),J=t(7999),b=t(3171),S=t(47275),k=t(72731),g=t(60775),F=t.n(g),f=t(24905),h=t(97786),le=t(89392),pe=t.n(le),_e=t(26710),e=t(37712),be=p.Z.Group,ge=j.Z.Panel,Ze=T.Z.Meta,ne=A.Z.Title,oe=A.Z.Text,R=f.ZP.sourceUrl,re=(0,f.VO)(R+"/db/2021/search.json"),K=(0,f.VO)(R+"/db/2021/main.json"),q=(0,f.VO)(R+"/db/2021/indexer.json"),ie="yellow";function ue(c){var v=q.indexOf(c),l=parseInt(K[v].clip),u=K[v].date.split("-")[0];u.length===1&&(u="0"+u);for(var a=new Array(l),i=0;i<l;i++)a[i]=[];if(l===1)for(var E=(0,f.Yu)(R+"/db/2021/"+u+"/srt/"+c+".srt"),d=E.split(`
`),D=0;D<d.length-2;D+=4){var x=d[D]+"|"+d[D+1]+"|"+d[D+2];a[0].push(x)}else for(var P=1;P<l+1;P++)for(var O=(0,f.Yu)(R+"/db/2021/"+u+"/srt/"+c+"-"+P.toString()+".srt"),M=O.split(`
`),m=0;m<M.length-2;m+=4){var ee=M[m]+"|"+M[m+1]+"|"+M[m+2];a[P-1].push(ee)}return a}var V=[];for(var U in q){var de=re[q[U]].title,he=K[U].bv,ce=K[U].date,ve=K[U].time;V.push({key:U,date:ce,hour:ve,bv:he,title:de})}V=(0,f.GP)(V);var Ee=[{title:"\u65E5\u671F",width:80,dataIndex:"date"},{title:"\u65F6\u95F4",width:80,dataIndex:"hour"},{title:"BV\u53F7",width:80,dataIndex:"bv",render:function(v){return(0,e.jsx)("a",{href:"https://www.bilibili.com/"+v,target:"_blank",onClick:function(u){u.stopPropagation()},children:v})}},{title:"\u6807\u9898",dataIndex:"title",render:function(v){return(0,e.jsx)(_.Z,{children:(0,e.jsx)(s.Z,{md:12,children:v})})}}],fe=function(c){(0,r.Z)(l,c);var v=(0,n.Z)(l);function l(u){var a;return(0,W.Z)(this,l),a=v.call(this,u),a.state={input:""},a.handleSearch=function(i){a.props.parent.handleSearch(a.state.input)},a.handleClear=function(i){a.setState({input:""}),a.props.parent.handleSearch("")},a.handleReverse=function(i){a.props.parent.handleReverse()},a}return(0,B.Z)(l,[{key:"render",value:function(){var a=this;return(0,e.jsxs)(T.Z,{onKeyDown:function(E){E.keyCode===13&&a.handleSearch(E)},actions:[(0,e.jsx)(b.Z,{title:"\u9006\u5E8F",onClick:this.handleReverse}),(0,e.jsx)(S.Z,{title:"\u6E05\u9664\u9009\u62E9",onClick:this.handleClear}),(0,e.jsx)(k.Z,{title:"\u641C\u7D22",onClick:this.handleSearch})],children:[(0,e.jsx)(_.Z,{children:(0,e.jsx)(s.Z,{xs:24,md:24,align:"middle",children:(0,e.jsx)(ne,{level:2,children:"\u5B57\u5E55\u5E93\u68C0\u7D22"})})}),(0,e.jsxs)(_.Z,{style:{height:"50px"},children:[(0,e.jsx)(s.Z,{xs:0,md:6}),(0,e.jsx)(s.Z,{xs:24,md:12,align:"middle",children:(0,e.jsx)(Q.Z,{style:{borderRadius:"50px"},placeholder:"\u5355\u6761\u5B57\u5E55\u68C0\u7D22\u{1F50D}",onChange:function(E){a.setState({input:E.target.value})},value:this.state.input})}),(0,e.jsx)(s.Z,{md:6,align:"middle"})]})]})}}]),l}(L.Component),De=function(c){(0,r.Z)(l,c);var v=(0,n.Z)(l);function l(u){var a;return(0,W.Z)(this,l),a=v.call(this,u),a.state={dataSource:a.props.initDatasrc,isModalVisible:!1,displayBV:"",searchWords:""},a.handleCancel=function(){a.setState({isModalVisible:!1})},a.handleSearch=function(i){a.setState({searchWords:i});var E=[],d=(0,z.Z)(a.props.initDatasrc),D;try{for(d.s();!(D=d.n()).done;){var x=D.value,P=x.bv,O=re[P].srt;O.indexOf(i)!==-1&&E.push(x)}}catch(M){d.e(M)}finally{d.f()}a.setState({dataSource:E})},a}return(0,B.Z)(l,[{key:"handleReverse",value:function(){var a=(0,f.GP)(this.state.dataSource);this.setState({dataSource:a})}},{key:"render",value:function(){var a=this,i=this.state,E=i.isModalVisible,d=i.displayBV,D=i.searchWords,x=[];return d!==""&&(x=ue(d)),(0,e.jsxs)(J.ZP,{children:[(0,e.jsx)(fe,{parent:this}),(0,e.jsx)(_.Z,{style:{marginTop:"20px"},children:(0,e.jsx)(s.Z,{xs:24,md:24,children:(0,e.jsx)(h.ZP,{columns:this.props.initColumns,rowKey:"key",dataSource:this.state.dataSource,search:!1,onRow:function(O){return{onClick:function(m){a.setState({isModalVisible:!0,displayBV:O.bv})},style:{cursor:"pointer"}}}})})}),(0,e.jsxs)(X.Z,{visible:E,maskClosable:!0,onCancel:this.handleCancel,footer:null,children:[(0,e.jsx)(_.Z,{children:(0,e.jsx)(s.Z,{xs:24,md:24,align:"middle",children:(0,e.jsx)(ne,{children:"\u5B57\u5E55\u8868"})})}),(0,e.jsxs)(_.Z,{children:[(0,e.jsx)(s.Z,{xs:3,md:3,children:"\u5E8F\u53F7"}),(0,e.jsx)(s.Z,{xs:10,md:10,children:"\u65F6\u95F4"}),(0,e.jsx)(s.Z,{xs:11,md:11,children:"\u5B57\u5E55"})]}),(0,e.jsx)(_.Z,{style:{borderBottom:"2px solid"},children:(0,e.jsx)(oe,{type:"secondary",children:"\u5B57\u5E55\u641C\u7D22\u7ED3\u679C\u4F1A\u4EE5\u9AD8\u4EAE\u5C55\u793A\u{1F483}\u{1F483}\u{1F483}\u5F80\u4E0B\u7FFB\u7FFB\u5427"})}),x.map(function(P,O){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(_.Z,{children:(0,e.jsx)(s.Z,{style:{color:"#9AC8E2",borderBottom:"1px solid"},children:(0,e.jsx)("a",{target:"_blank",href:"https://www.bilibili.com/"+d+"?p="+(O+1),children:"\u5207\u7247"+(O+1)})})}),(0,e.jsx)(e.Fragment,{children:P.map(function(M){var m=M.split("|"),ee=m[0],G=m[1],me=m[2],Pe=parseInt(G.split("-->")[0].split(":")[0]),Oe=parseInt(G.split("-->")[0].split(":")[1]),Me=parseInt(G.split("-->")[0].split(":")[2].split(",")[0]),Ce=Pe*3600+60*Oe+Me,xe="https://www.bilibili.com/"+d+"?p="+(O+1)+"&t="+Ce;return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(_.Z,{style:{borderBottom:"1px dashed"},children:[(0,e.jsx)(s.Z,{xs:3,md:3,style:{color:"#B8A6D9"},children:ee}),(0,e.jsx)(s.Z,{xs:10,md:10,children:(0,e.jsx)("a",{target:"_blank",href:xe,children:G})}),(0,e.jsx)(s.Z,{xs:11,md:11,style:{color:"#E799B0"},children:(0,e.jsx)(F(),{highlightStyle:{backgroundColor:ie,padding:0},searchWords:[D],autoEscape:!0,textToHighlight:me})})]})})})})]})})]})]})}}]),l}(L.Component);Z.default=function(){var c={initColumns:Ee,initDatasrc:V};return(0,e.jsx)(C.ZP,{locale:_e.Z,children:(0,e.jsx)(De,(0,Y.Z)({},c))})}}}]);
