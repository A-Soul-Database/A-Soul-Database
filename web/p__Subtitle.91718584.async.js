(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[707],{40132:function(ce,y,a){"use strict";a.d(y,{EQ:function(){return z},VO:function(){return ae},Yu:function(){return Q},GP:function(){return U}});var H=a(86582),P=a(91220),w=["https://livedb.asoulfan.com","https://raw.githubusercontent.com/peterpei1186861238/A-Soul-Database/main"],Y=0;y.ZP={RunOnLocal:Y!==0,sourceUrl:w[Y]};var X=["scene","staff","type"];function z(s,n){{var d=new Set,_=(0,P.Z)(n.staff),$;try{for(_.s();!($=_.n()).done;){var o=$.value;if(o!=="F"){var j=(0,P.Z)(n.skin[o]),A;try{for(j.s();!(A=j.n()).done;){var ne=A.value;d.add(ne)}}catch(h){j.e(h)}finally{j.f()}}}}catch(h){_.e(h)}finally{_.f()}var T=Array.from(d);if(T.length!==0&&!B(s.skin,T))return!1}if(s.platform.indexOf(n.platform)===-1)return!1;var L=(0,P.Z)(X),W;try{for(L.s();!(W=L.n()).done;){var J=W.value;if(!B(s[J],n[J]))return!1}}catch(h){L.e(h)}finally{L.f()}if(s.titlestr===""&&s.tagstr===""&&s.typestr===""||n.title.toLowerCase().indexOf(s.titlestr.toLowerCase())!==-1)return!0;{var g=(0,P.Z)(n.tags),b;try{for(g.s();!(b=g.n()).done;){var k=b.value;if(k.toLowerCase().indexOf(s.tagstr.toLowerCase())!==-1)return!0}}catch(h){g.e(h)}finally{g.f()}}{var Z=(0,P.Z)(n.items),S;try{for(Z.s();!(S=Z.n()).done;){var q=S.value,I=(0,P.Z)(q.item),V;try{for(I.s();!(V=I.n()).done;){var ee=V.value;if(ee[0].toLowerCase().indexOf(s.typestr.toLowerCase())!==-1)return!0}}catch(h){I.e(h)}finally{I.f()}}}catch(h){Z.e(h)}finally{Z.f()}}return!1}function ae(s){var n=new XMLHttpRequest;n.open("GET",s,!1),n.send(null);var d;try{d=JSON.parse(n.responseText)}catch(_){d={title:"error"}}finally{return d}}function Q(s){var n=new XMLHttpRequest;n.open("GET",s,!1),n.send(null);var d;try{d=n.responseText}catch(_){d="error http"}finally{return d}}function U(s){for(var n=[],d=s.length-1;d>=0;d--)n.push(s[d]);return n}function B(s,n){return s.length+n.length!==Array.from(new Set([].concat((0,H.Z)(s),(0,H.Z)(n)))).length}},50205:function(ce,y,a){"use strict";a.r(y);var H=a(84305),P=a(69224),w=a(11849),Y=a(71194),X=a(5644),z=a(91220),ae=a(47673),Q=a(4107),U=a(69610),B=a(54941),s=a(81306),n=a(72936),d=a(13062),_=a(71230),$=a(89032),o=a(15746),j=a(402),A=a(3887),ne=a(58024),T=a(39144),L=a(7359),W=a(27279),J=a(63185),g=a(9676),b=a(67294),k=a(67265),Z=a(258),S=a(72850),q=a(76570),I=a(7091),V=a(44378),ee=a(37763),h=a.n(ee),O=a(40132),he=a(14032),ve=a(96486),Ie=a.n(ve),Ee=a(82925),e=a(85893),ye=g.Z.Group,Be=W.Z.Panel,je=T.Z.Meta,se=A.Z.Title,De=A.Z.Text,R=O.ZP.sourceUrl,re=(0,O.VO)(R+"/db/2021/search.json"),K=(0,O.VO)(R+"/db/2021/main.json"),F=(0,O.VO)(R+"/db/2021/indexer.json"),fe="yellow";function me(v){var E=F.indexOf(v),u=parseInt(K[E].clip),c=K[E].date.split("-")[0];c.length===1&&(c="0"+c);for(var t=new Array(u),l=0;l<u;l++)t[l]=[];if(u===1)for(var i=(0,O.Yu)(R+"/db/2021/"+c+"/srt/"+v+".srt"),r=i.split(`
`),D=0;D<r.length-2;D+=4){var p=r[D]+"|"+r[D+1]+"|"+r[D+2];t[0].push(p)}else for(var f=1;f<u+1;f++)for(var C=(0,O.Yu)(R+"/db/2021/"+c+"/srt/"+v+"-"+f.toString()+".srt"),x=C.split(`
`),m=0;m<x.length-2;m+=4){var te=x[m]+"|"+x[m+1]+"|"+x[m+2];t[f-1].push(te)}return t}var N=[];for(var M in F){var le=void 0,oe=void 0,_e=void 0,ie=void 0;try{le=re[F[M]].title}catch(v){console.error("title fault for bv: "+F[M])}try{oe=K[M].bv,_e=K[M].date,ie=K[M].time}catch(v){console.error("mainJson parse fault for n: "+M)}N.push({key:M,date:_e,hour:ie,bv:oe,title:le})}N=(0,O.GP)(N);var Ce=[{title:"\u65E5\u671F",width:80,dataIndex:"date"},{title:"\u65F6\u95F4",width:80,dataIndex:"hour"},{title:"BV\u53F7",width:80,dataIndex:"bv",render:function(E){return(0,e.jsx)("a",{href:"https://www.bilibili.com/"+E,target:"_blank",onClick:function(c){c.stopPropagation()},children:E})}},{title:"\u6807\u9898",dataIndex:"title",render:function(E){return(0,e.jsx)(_.Z,{children:(0,e.jsx)(o.Z,{md:12,children:E})})}}],xe=function(v){(0,s.Z)(u,v);var E=(0,n.Z)(u);function u(c){var t;return(0,U.Z)(this,u),t=E.call(this,c),t.state={input:""},t.handleSearch=function(l){t.props.parent.handleSearch(t.state.input)},t.handleClear=function(l){t.setState({input:""}),t.props.parent.handleSearch("")},t.handleReverse=function(l){t.props.parent.handleReverse()},t}return(0,B.Z)(u,[{key:"render",value:function(){var t=this;return(0,e.jsxs)(T.Z,{onKeyDown:function(i){i.keyCode===13&&t.handleSearch(i)},actions:[(0,e.jsx)(Z.Z,{title:"\u9006\u5E8F",onClick:this.handleReverse}),(0,e.jsx)(S.Z,{title:"\u6E05\u9664\u9009\u62E9",onClick:this.handleClear}),(0,e.jsx)(q.Z,{title:"\u641C\u7D22",onClick:this.handleSearch})],children:[(0,e.jsx)(_.Z,{children:(0,e.jsx)(o.Z,{xs:24,md:24,align:"middle",children:(0,e.jsx)(se,{level:2,children:"\u5B57\u5E55\u5E93\u68C0\u7D22"})})}),(0,e.jsxs)(_.Z,{style:{height:"50px"},children:[(0,e.jsx)(o.Z,{xs:0,md:6}),(0,e.jsx)(o.Z,{xs:24,md:12,align:"middle",children:(0,e.jsx)(Q.Z,{style:{borderRadius:"50px"},placeholder:"\u5355\u6761\u5B57\u5E55\u68C0\u7D22\u{1F50D}",onChange:function(i){t.setState({input:i.target.value})},value:this.state.input})}),(0,e.jsx)(o.Z,{md:6,align:"middle"})]})]})}}]),u}(b.Component),Pe=function(v){(0,s.Z)(u,v);var E=(0,n.Z)(u);function u(c){var t;return(0,U.Z)(this,u),t=E.call(this,c),t.state={dataSource:t.props.initDatasrc,isModalVisible:!1,displayBV:"",searchWords:"",currentID:0},t.handleCancel=function(){t.scrollTop(),t.setState({isModalVisible:!1,currentID:0})},t.handleSearch=function(l){t.setState({searchWords:l});var i=[],r=(0,z.Z)(t.props.initDatasrc),D;try{for(r.s();!(D=r.n()).done;){var p=D.value,f=p.bv,C=re[f].srt;C.toLowerCase().indexOf(l.toLowerCase())!==-1&&i.push(p)}}catch(x){r.e(x)}finally{r.f()}t.setState({dataSource:i})},t.scrollTop=function(){var l=document.getElementById("Table-top");l.scrollIntoView({behavior:"auto"})},t.scrollNext=function(l){var i=document.getElementsByClassName(l);if(i.length!==0){var r=t.state.currentID;i[r].scrollIntoView({behavior:"smooth"}),r>=i.length-1?t.setState({currentID:0}):t.setState({currentID:r+1})}},t.scrollPre=function(l){var i=document.getElementsByClassName(l);if(i.length!=0){var r=t.state.currentID;i[r].scrollIntoView({behavior:"smooth"}),r<=0?t.setState({currentID:i.length-1}):t.setState({currentID:r-1})}},t}return(0,B.Z)(u,[{key:"handleReverse",value:function(){var t=(0,O.GP)(this.state.dataSource);this.setState({dataSource:t})}},{key:"render",value:function(){var t=this,l=this.state,i=l.isModalVisible,r=l.displayBV,D=l.searchWords,p=[];return r!==""&&(p=me(r)),(0,e.jsxs)(k.ZP,{children:[(0,e.jsx)(xe,{parent:this}),(0,e.jsx)(_.Z,{style:{marginTop:"20px"},children:(0,e.jsx)(o.Z,{xs:24,md:24,children:(0,e.jsx)(he.ZP,{columns:this.props.initColumns,rowKey:"key",dataSource:this.state.dataSource,search:!1,onRow:function(C){return{onClick:function(m){t.setState({isModalVisible:!0,displayBV:C.bv})},style:{cursor:"pointer"}}}})})}),(0,e.jsxs)(X.Z,{id:"modal",visible:i,maskClosable:!0,onCancel:this.handleCancel,footer:null,children:[(0,e.jsx)(_.Z,{children:(0,e.jsx)(o.Z,{xs:24,md:24,align:"middle",children:(0,e.jsx)(se,{children:"\u5B57\u5E55\u8868"})})}),(0,e.jsx)(_.Z,{children:(0,e.jsx)(o.Z,{children:(0,e.jsxs)("a",{onClick:function(){return t.scrollPre("active-highlight")},children:[(0,e.jsx)(I.Z,{}),"\u4E0A\u4E00\u6761\u641C\u7D22\u7ED3\u679C"]})})}),(0,e.jsx)(_.Z,{children:(0,e.jsx)(o.Z,{children:(0,e.jsxs)("a",{onClick:function(){return t.scrollNext("active-highlight")},children:[(0,e.jsx)(V.Z,{}),"\u4E0B\u4E00\u6761\u641C\u7D22\u7ED3\u679C"]})})}),(0,e.jsxs)(_.Z,{children:[(0,e.jsx)(o.Z,{xs:3,md:3,children:"\u5E8F\u53F7"}),(0,e.jsx)(o.Z,{xs:10,md:10,children:"\u65F6\u95F4"}),(0,e.jsx)(o.Z,{xs:11,md:11,children:"\u5B57\u5E55"})]}),(0,e.jsx)(_.Z,{style:{borderBottom:"2px solid"},children:(0,e.jsx)(De,{type:"secondary",children:"\u5B57\u5E55\u641C\u7D22\u7ED3\u679C\u4F1A\u4EE5\u9AD8\u4EAE\u5C55\u793A\uFF0C\u7528\u6309\u952E\u4E0A\u4E0B\u79FB\u52A8\u5427\u{1F483}\u{1F483}\u{1F483}"})}),(0,e.jsx)(_.Z,{children:(0,e.jsx)(o.Z,{span:24,style:{height:"500px",overflowY:"scroll"},children:p.map(function(f,C){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(_.Z,{children:(0,e.jsx)(o.Z,{style:{color:"#9AC8E2",borderBottom:"1px solid"},id:"Table-top",children:(0,e.jsx)("a",{target:"_blank",href:"https://www.bilibili.com/"+r+"?p="+(C+1),children:"\u5207\u7247"+(C+1)})})}),(0,e.jsx)(e.Fragment,{children:f.map(function(x){var m=x.split("|"),te=m[0],G=m[1],ue=m[2],Oe=parseInt(G.split("-->")[0].split(":")[0]),Me=parseInt(G.split("-->")[0].split(":")[1]),pe=parseInt(G.split("-->")[0].split(":")[2].split(",")[0]),ge=Oe*3600+60*Me+pe,Ze="https://www.bilibili.com/"+r+"?p="+(C+1)+"&t="+ge,de="";return ue.toLowerCase().indexOf(D.toLowerCase())!==-1&&(de="active-highlight"),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(_.Z,{style:{borderBottom:"1px dashed"},className:de,children:[(0,e.jsx)(o.Z,{xs:3,md:3,style:{color:"#B8A6D9"},children:te}),(0,e.jsx)(o.Z,{xs:10,md:10,children:(0,e.jsx)("a",{target:"_blank",href:Ze,children:G})}),(0,e.jsx)(o.Z,{xs:11,md:11,style:{color:"#E799B0"},children:(0,e.jsx)(h(),{highlightStyle:{backgroundColor:fe,padding:0},searchWords:[D],autoEscape:!0,textToHighlight:ue})})]})})})})]})})})})]})]})}}]),u}(b.Component);y.default=function(){var v={initColumns:Ce,initDatasrc:N};return(0,e.jsx)(P.ZP,{locale:Ee.Z,children:(0,e.jsx)(Pe,(0,w.Z)({},v))})}}}]);
