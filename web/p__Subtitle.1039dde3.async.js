(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[707],{24905:function(se,p,t){"use strict";t.d(p,{EQ:function(){return ee},VO:function(){return N},Yu:function(){return K},GP:function(){return L}});var V=t(4402),O=t(22183),G="V1.30",q=["https://cdn.jsdelivr.net/gh/peterpei1186861238/ASDB@"+G,"https://raw.githubusercontent.com/peterpei1186861238/A-Soul-Database/main","https://livedb.asoulfan.com"],H=1;p.ZP={sourceUrl:q[H]};var Y=["scene","staff","type"];function ee(r,s){for(var a in r)if(a==="skin"){var g=new Set,l=(0,O.Z)(s.staff),X;try{for(l.s();!(X=l.n()).done;){var Z=X.value;if(Z!=="F"){var A=(0,O.Z)(s.skin[Z]),b;try{for(A.s();!(b=A.n()).done;){var te=b.value;g.add(te)}}catch(_){A.e(_)}finally{A.f()}}}}catch(_){l.e(_)}finally{l.f()}var z=Array.from(g);if(!B(r.skin,z))return console.log("skin not match"),!1}else if(a==="platform"){if(r.platform.indexOf(s.platform)===-1)return console.log("platform not match"),!1}else if(Y.indexOf(a)!==-1){if(!B(r[a],s[a]))return console.log("insert not match"),!1}else if(a==="titlestr"){if(s.title.indexOf(r[a])!==-1)return!0}else if(a==="tagstr"){var R=(0,O.Z)(s.tags),U;try{for(R.s();!(U=R.n()).done;){var W=U.value;if(W.indexOf(r[a])!==-1)return!0}}catch(_){R.e(_)}finally{R.f()}}else if(a==="typestr"){var x=(0,O.Z)(s.items),j;try{for(x.s();!(j=x.n()).done;){var Q=j.value,C=(0,O.Z)(Q.item),S;try{for(C.s();!(S=C.n()).done;){var $=S.value;if($[0].indexOf(r[a])!==-1)return!0}}catch(_){C.e(_)}finally{C.f()}}}catch(_){x.e(_)}finally{x.f()}}else continue;return!1}function N(r){var s=new XMLHttpRequest;s.open("GET",r,!1),s.send(null);var a;try{a=JSON.parse(s.responseText)}catch(g){a={title:"error"}}finally{return a}}function K(r){var s=new XMLHttpRequest;s.open("GET",r,!1),s.send(null);var a;try{a=s.responseText}catch(g){a="error http"}finally{return a}}function L(r){for(var s=[],a=r.length-1;a>=0;a--)s.push(r[a]);return s}function B(r,s){return r.length+s.length!==Array.from(new Set([].concat((0,V.Z)(r),(0,V.Z)(s)))).length}},24339:function(se,p,t){"use strict";t.r(p);var V=t(15629),O=t(55778),G=t(17208),q=t(52645),H=t(91298),Y=t(22183),ee=t(14013),N=t(41023),K=t(14765),L=t(67917),B=t(97414),r=t(68319),s=t(17051),a=t(4701),g=t(52916),l=t(34636),X=t(6575),Z=t(65789),A=t(76664),b=t(52212),te=t(77981),z=t(58176),R=t(97594),U=t(8238),W=t(59301),x=t(7999),j=t(3171),Q=t(47275),C=t(72731),S=t(60775),$=t.n(S),_=t(24905),re=t(23928),le=t(89392),Pe=t.n(le),_e=t(26710),e=t(37712),Oe=U.Z.Group,Me=z.Z.Panel,xe=b.Z.Meta,ne=Z.Z.Title,oe=Z.Z.Text,T=_.ZP.sourceUrl,ae=(0,_.VO)(T+"/db/2021/search.json"),I=(0,_.VO)(T+"/db/2021/main.json"),J=(0,_.VO)(T+"/db/2021/indexer.json");function ie(h){var c=J.indexOf(h),o=parseInt(I[c].clip),u=I[c].date.split("-")[0];u.length===1&&(u="0"+u);for(var n=new Array(o),i=0;i<o;i++)n[i]=[];if(o===1)for(var E=(0,_.Yu)(T+"/db/2021/"+u+"/srt/"+h+".srt"),d=E.split(`
`),f=0;f<d.length-2;f+=4){var P=d[f]+"|"+d[f+1]+"|"+d[f+2];n[0].push(P)}else for(var D=1;D<o+1;D++)for(var M=(0,_.Yu)(T+"/db/2021/"+u+"/srt/"+h+"-"+D.toString()+".srt"),v=M.split(`
`),m=0;m<v.length-2;m+=4){var k=v[m]+"|"+v[m+1]+"|"+v[m+2];n[D-1].push(k)}return n}var F=[];for(var y in J){var ue=ae[J[y]].title,de=I[y].bv,he=I[y].date,ce=I[y].time;F.push({key:y,date:he,hour:ce,bv:de,title:ue})}F=(0,_.GP)(F);var Ee=[{title:"\u65E5\u671F",width:80,dataIndex:"date"},{title:"\u65F6\u95F4",width:80,dataIndex:"hour"},{title:"BV\u53F7",width:80,dataIndex:"bv",render:function(c){return(0,e.jsx)("a",{href:"https://www.bilibili.com/"+c,target:"_blank",onClick:function(u){u.stopPropagation()},children:c})}},{title:"\u6807\u9898",dataIndex:"title",render:function(c){return(0,e.jsx)(a.Z,{children:(0,e.jsx)(l.Z,{md:12,children:c})})}}],ve=function(h){(0,B.Z)(o,h);var c=(0,r.Z)(o);function o(u){var n;return(0,K.Z)(this,o),n=c.call(this,u),n.state={input:""},n.handleSearch=function(i){n.props.parent.handleSearch(n.state.input)},n.handleClear=function(i){n.setState({input:""}),n.props.parent.handleSearch("")},n.handleReverse=function(i){n.props.parent.handleReverse()},n}return(0,L.Z)(o,[{key:"render",value:function(){var n=this;return(0,e.jsxs)(b.Z,{onKeyDown:function(E){E.keyCode===13&&n.handleSearch(E)},actions:[(0,e.jsx)(j.Z,{title:"\u9006\u5E8F",onClick:this.handleReverse}),(0,e.jsx)(Q.Z,{title:"\u6E05\u9664\u9009\u62E9",onClick:this.handleClear}),(0,e.jsx)(C.Z,{title:"\u641C\u7D22",onClick:this.handleSearch})],children:[(0,e.jsx)(a.Z,{children:(0,e.jsx)(l.Z,{xs:24,md:24,align:"middle",children:(0,e.jsx)(ne,{level:2,children:"\u5B57\u5E55\u5E93\u68C0\u7D22"})})}),(0,e.jsxs)(a.Z,{style:{height:"50px"},children:[(0,e.jsx)(l.Z,{xs:0,md:6}),(0,e.jsx)(l.Z,{xs:24,md:12,align:"middle",children:(0,e.jsx)(N.Z,{style:{borderRadius:"50px"},placeholder:"\u5355\u6761\u5B57\u5E55\u68C0\u7D22\u{1F50D}",onChange:function(E){n.setState({input:E.target.value})},value:this.state.input})}),(0,e.jsx)(l.Z,{md:6,align:"middle"})]})]})}}]),o}(W.Component),fe=function(h){(0,B.Z)(o,h);var c=(0,r.Z)(o);function o(u){var n;return(0,K.Z)(this,o),n=c.call(this,u),n.state={dataSource:n.props.initDatasrc,isModalVisible:!1,displayBV:"",searchWords:""},n.handleCancel=function(){n.setState({isModalVisible:!1})},n.handleSearch=function(i){n.setState({searchWords:i});var E=[],d=(0,Y.Z)(n.props.initDatasrc),f;try{for(d.s();!(f=d.n()).done;){var P=f.value,D=P.bv,M=ae[D].srt;M.indexOf(i)!==-1&&E.push(P)}}catch(v){d.e(v)}finally{d.f()}n.setState({dataSource:E})},n}return(0,L.Z)(o,[{key:"handleReverse",value:function(){var n=(0,_.GP)(this.state.dataSource);this.setState({dataSource:n})}},{key:"render",value:function(){var n=this,i=this.state,E=i.isModalVisible,d=i.displayBV,f=i.searchWords,P=[];return d!==""&&(P=ie(d),console.log(P)),(0,e.jsxs)(x.ZP,{children:[(0,e.jsx)(ve,{parent:this}),(0,e.jsx)(a.Z,{style:{marginTop:"20px"},children:(0,e.jsx)(l.Z,{xs:24,md:24,children:(0,e.jsx)(re.ZP,{columns:this.props.initColumns,rowKey:"key",dataSource:this.state.dataSource,search:!1,onRow:function(M){return{onClick:function(m){n.setState({isModalVisible:!0,displayBV:M.bv})},style:{cursor:"pointer"}}}})})}),(0,e.jsxs)(H.Z,{visible:E,maskClosable:!0,onCancel:this.handleCancel,footer:null,children:[(0,e.jsx)(a.Z,{children:(0,e.jsx)(l.Z,{xs:24,md:24,align:"middle",children:(0,e.jsx)(ne,{children:"\u5B57\u5E55\u8868"})})}),(0,e.jsxs)(a.Z,{children:[(0,e.jsx)(l.Z,{xs:3,md:3,children:"\u5E8F\u53F7"}),(0,e.jsx)(l.Z,{xs:10,md:10,children:"\u65F6\u95F4"}),(0,e.jsx)(l.Z,{xs:11,md:11,children:"\u5B57\u5E55"})]}),(0,e.jsx)(a.Z,{style:{borderBottom:"2px solid"},children:(0,e.jsx)(oe,{type:"secondary",children:"\u5B57\u5E55\u641C\u7D22\u7ED3\u679C\u4F1A\u4EE5\u9AD8\u4EAE\u5C55\u793A\u{1F483}\u{1F483}\u{1F483}\u5F80\u4E0B\u7FFB\u7FFB\u5427"})}),P.map(function(D){return console.log(D),D.map(function(M){var v=M.split("|"),m=v[0],k=v[1],De=v[2],w;return m==="0"?w=function(){return(0,e.jsx)(a.Z,{children:(0,e.jsx)(l.Z,{style:{color:"#9AC8E2",borderBottom:"1px solid"},children:"\u5207\u7247\u5206\u5272\u7EBF"})})}:w=function(){return(0,e.jsx)(e.Fragment,{})},(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(w,{}),(0,e.jsxs)(a.Z,{style:{borderBottom:"1px dashed"},children:[(0,e.jsx)(l.Z,{xs:3,md:3,style:{color:"#B8A6D9"},children:m}),(0,e.jsx)(l.Z,{xs:10,md:10,style:{color:"#E799B0"},children:k}),(0,e.jsx)(l.Z,{xs:11,md:11,style:{color:"#576690"},children:(0,e.jsx)($(),{highlightStyle:{backgroundColor:"#BD7D74",padding:0},searchWords:[f],autoEscape:!0,textToHighlight:De})})]})]})})})]})]})}}]),o}(W.Component);p.default=function(){var h={initColumns:Ee,initDatasrc:F};return(0,e.jsx)(O.ZP,{locale:_e.Z,children:(0,e.jsx)(fe,(0,G.Z)({},h))})}}}]);
