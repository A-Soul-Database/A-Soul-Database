(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[707],{54437:function(se,Z,t){"use strict";t.d(Z,{EQ:function(){return z},VO:function(){return te},Yu:function(){return Q},GP:function(){return U}});var H=t(10971),M=t(69076),Y=["https://livedb.asoulfan.com","https://raw.githubusercontent.com/peterpei1186861238/A-Soul-Database/main","https://cdn.jsdelivr.net/gh/peterpei1186861238/ASDB@latest"],N=2;Z.ZP={RunOnLocal:N!==0,sourceUrl:Y[N]};var X=["scene","staff","type"];function z(r,a){{var o=new Set,_=(0,M.Z)(a.staff),$;try{for(_.s();!($=_.n()).done;){var s=$.value;if(s!=="F"){var T=(0,M.Z)(a.skin[s]),j;try{for(T.s();!(j=T.n()).done;){var ne=j.value;o.add(ne)}}catch(h){T.e(h)}finally{T.f()}}}}catch(h){_.e(h)}finally{_.f()}var I=Array.from(o);if(I.length!==0&&!y(r.skin,I))return!1}if(r.platform.indexOf(a.platform)===-1)return!1;var L=(0,M.Z)(X),W;try{for(L.s();!(W=L.n()).done;){var w=W.value;if(!y(r[w],a[w]))return!1}}catch(h){L.e(h)}finally{L.f()}if(r.titlestr===""&&r.tagstr===""&&r.typestr===""||a.title.toLowerCase().indexOf(r.titlestr.toLowerCase())!==-1)return!0;{var x=(0,M.Z)(a.tags),R;try{for(x.s();!(R=x.n()).done;){var J=R.value;if(J.toLowerCase().indexOf(r.tagstr.toLowerCase())!==-1)return!0}}catch(h){x.e(h)}finally{x.f()}}{var g=(0,M.Z)(a.items),S;try{for(g.s();!(S=g.n()).done;){var k=S.value,B=(0,M.Z)(k.item),F;try{for(B.s();!(F=B.n()).done;){var f=F.value;if(f[0].toLowerCase().indexOf(r.typestr.toLowerCase())!==-1)return!0}}catch(h){B.e(h)}finally{B.f()}}}catch(h){g.e(h)}finally{g.f()}}return!1}function te(r){var a=new XMLHttpRequest;a.open("GET",r,!1),a.send(null);var o;try{o=JSON.parse(a.responseText)}catch(_){o={title:"error"}}finally{return o}}function Q(r){var a=new XMLHttpRequest;a.open("GET",r,!1),a.send(null);var o;try{o=a.responseText}catch(_){o="error http"}finally{return o}}function U(r){for(var a=[],o=r.length-1;o>=0;o--)a.push(r[o]);return a}function y(r,a){return r.length+a.length!==Array.from(new Set([].concat((0,H.Z)(r),(0,H.Z)(a)))).length}},1634:function(se,Z,t){"use strict";t.r(Z);var H=t(15629),M=t(55778),Y=t(906),N=t(52645),X=t(91298),z=t(69076),te=t(14013),Q=t(41023),U=t(51548),y=t(46893),r=t(37150),a=t(65473),o=t(17051),_=t(4701),$=t(52916),s=t(34636),T=t(6575),j=t(41277),ne=t(76664),I=t(52212),L=t(77981),W=t(98478),w=t(97594),x=t(8238),R=t(59301),J=t(96731),g=t(59848),S=t(31443),k=t(18679),B=t(60775),F=t.n(B),f=t(54437),h=t(24467),le=t(89392),xe=t.n(le),_e=t(26710),e=t(37712),ge=x.Z.Group,Be=W.Z.Panel,Ze=I.Z.Meta,ae=j.Z.Title,oe=j.Z.Text,A=f.ZP.sourceUrl,re=(0,f.VO)(A+"/db/2021/search.json"),K=(0,f.VO)(A+"/db/2021/main.json"),q=(0,f.VO)(A+"/db/2021/indexer.json"),ie="yellow";function de(c){var v=q.indexOf(c),l=parseInt(K[v].clip),d=K[v].date.split("-")[0];d.length===1&&(d="0"+d);for(var n=new Array(l),i=0;i<l;i++)n[i]=[];if(l===1)for(var E=(0,f.Yu)(A+"/db/2021/"+d+"/srt/"+c+".srt"),u=E.split(`
`),D=0;D<u.length-2;D+=4){var C=u[D]+"|"+u[D+1]+"|"+u[D+2];n[0].push(C)}else for(var P=1;P<l+1;P++)for(var O=(0,f.Yu)(A+"/db/2021/"+d+"/srt/"+c+"-"+P.toString()+".srt"),p=O.split(`
`),m=0;m<p.length-2;m+=4){var ee=p[m]+"|"+p[m+1]+"|"+p[m+2];n[P-1].push(ee)}return n}var V=[];for(var b in q){var ue=re[q[b]].title,he=K[b].bv,ce=K[b].date,ve=K[b].time;V.push({key:b,date:ce,hour:ve,bv:he,title:ue})}V=(0,f.GP)(V);var Ee=[{title:"\u65E5\u671F",width:80,dataIndex:"date"},{title:"\u65F6\u95F4",width:80,dataIndex:"hour"},{title:"BV\u53F7",width:80,dataIndex:"bv",render:function(v){return(0,e.jsx)("a",{href:"https://www.bilibili.com/"+v,target:"_blank",onClick:function(d){d.stopPropagation()},children:v})}},{title:"\u6807\u9898",dataIndex:"title",render:function(v){return(0,e.jsx)(_.Z,{children:(0,e.jsx)(s.Z,{md:12,children:v})})}}],fe=function(c){(0,r.Z)(l,c);var v=(0,a.Z)(l);function l(d){var n;return(0,U.Z)(this,l),n=v.call(this,d),n.state={input:""},n.handleSearch=function(i){n.props.parent.handleSearch(n.state.input)},n.handleClear=function(i){n.setState({input:""}),n.props.parent.handleSearch("")},n.handleReverse=function(i){n.props.parent.handleReverse()},n}return(0,y.Z)(l,[{key:"render",value:function(){var n=this;return(0,e.jsxs)(I.Z,{onKeyDown:function(E){E.keyCode===13&&n.handleSearch(E)},actions:[(0,e.jsx)(g.Z,{title:"\u9006\u5E8F",onClick:this.handleReverse}),(0,e.jsx)(S.Z,{title:"\u6E05\u9664\u9009\u62E9",onClick:this.handleClear}),(0,e.jsx)(k.Z,{title:"\u641C\u7D22",onClick:this.handleSearch})],children:[(0,e.jsx)(_.Z,{children:(0,e.jsx)(s.Z,{xs:24,md:24,align:"middle",children:(0,e.jsx)(ae,{level:2,children:"\u5B57\u5E55\u5E93\u68C0\u7D22"})})}),(0,e.jsxs)(_.Z,{style:{height:"50px"},children:[(0,e.jsx)(s.Z,{xs:0,md:6}),(0,e.jsx)(s.Z,{xs:24,md:12,align:"middle",children:(0,e.jsx)(Q.Z,{style:{borderRadius:"50px"},placeholder:"\u5355\u6761\u5B57\u5E55\u68C0\u7D22\u{1F50D}",onChange:function(E){n.setState({input:E.target.value})},value:this.state.input})}),(0,e.jsx)(s.Z,{md:6,align:"middle"})]})]})}}]),l}(R.Component),De=function(c){(0,r.Z)(l,c);var v=(0,a.Z)(l);function l(d){var n;return(0,U.Z)(this,l),n=v.call(this,d),n.state={dataSource:n.props.initDatasrc,isModalVisible:!1,displayBV:"",searchWords:""},n.handleCancel=function(){n.setState({isModalVisible:!1})},n.handleSearch=function(i){n.setState({searchWords:i});var E=[],u=(0,z.Z)(n.props.initDatasrc),D;try{for(u.s();!(D=u.n()).done;){var C=D.value,P=C.bv,O=re[P].srt;O.indexOf(i)!==-1&&E.push(C)}}catch(p){u.e(p)}finally{u.f()}n.setState({dataSource:E})},n}return(0,y.Z)(l,[{key:"handleReverse",value:function(){var n=(0,f.GP)(this.state.dataSource);this.setState({dataSource:n})}},{key:"render",value:function(){var n=this,i=this.state,E=i.isModalVisible,u=i.displayBV,D=i.searchWords,C=[];return u!==""&&(C=de(u)),(0,e.jsxs)(J.ZP,{children:[(0,e.jsx)(fe,{parent:this}),(0,e.jsx)(_.Z,{style:{marginTop:"20px"},children:(0,e.jsx)(s.Z,{xs:24,md:24,children:(0,e.jsx)(h.ZP,{columns:this.props.initColumns,rowKey:"key",dataSource:this.state.dataSource,search:!1,onRow:function(O){return{onClick:function(m){n.setState({isModalVisible:!0,displayBV:O.bv})},style:{cursor:"pointer"}}}})})}),(0,e.jsxs)(X.Z,{visible:E,maskClosable:!0,onCancel:this.handleCancel,footer:null,children:[(0,e.jsx)(_.Z,{children:(0,e.jsx)(s.Z,{xs:24,md:24,align:"middle",children:(0,e.jsx)(ae,{children:"\u5B57\u5E55\u8868"})})}),(0,e.jsxs)(_.Z,{children:[(0,e.jsx)(s.Z,{xs:3,md:3,children:"\u5E8F\u53F7"}),(0,e.jsx)(s.Z,{xs:10,md:10,children:"\u65F6\u95F4"}),(0,e.jsx)(s.Z,{xs:11,md:11,children:"\u5B57\u5E55"})]}),(0,e.jsx)(_.Z,{style:{borderBottom:"2px solid"},children:(0,e.jsx)(oe,{type:"secondary",children:"\u5B57\u5E55\u641C\u7D22\u7ED3\u679C\u4F1A\u4EE5\u9AD8\u4EAE\u5C55\u793A\u{1F483}\u{1F483}\u{1F483}\u5F80\u4E0B\u7FFB\u7FFB\u5427"})}),C.map(function(P,O){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(_.Z,{children:(0,e.jsx)(s.Z,{style:{color:"#9AC8E2",borderBottom:"1px solid"},children:(0,e.jsx)("a",{target:"_blank",href:"https://www.bilibili.com/"+u+"?p="+(O+1),children:"\u5207\u7247"+(O+1)})})}),(0,e.jsx)(e.Fragment,{children:P.map(function(p){var m=p.split("|"),ee=m[0],G=m[1],me=m[2],Pe=parseInt(G.split("-->")[0].split(":")[0]),Oe=parseInt(G.split("-->")[0].split(":")[1]),pe=parseInt(G.split("-->")[0].split(":")[2].split(",")[0]),Me=Pe*3600+60*Oe+pe,Ce="https://www.bilibili.com/"+u+"?p="+(O+1)+"&t="+Me;return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(_.Z,{style:{borderBottom:"1px dashed"},children:[(0,e.jsx)(s.Z,{xs:3,md:3,style:{color:"#B8A6D9"},children:ee}),(0,e.jsx)(s.Z,{xs:10,md:10,children:(0,e.jsx)("a",{target:"_blank",href:Ce,children:G})}),(0,e.jsx)(s.Z,{xs:11,md:11,style:{color:"#E799B0"},children:(0,e.jsx)(F(),{highlightStyle:{backgroundColor:ie,padding:0},searchWords:[D],autoEscape:!0,textToHighlight:me})})]})})})})]})})]})]})}}]),l}(R.Component);Z.default=function(){var c={initColumns:Ee,initDatasrc:V};return(0,e.jsx)(M.ZP,{locale:_e.Z,children:(0,e.jsx)(De,(0,Y.Z)({},c))})}}}]);
