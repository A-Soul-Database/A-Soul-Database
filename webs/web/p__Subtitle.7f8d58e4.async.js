(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[707],{37141:function(ue,L,n){"use strict";n.d(L,{EQ:function(){return Q},VO:function(){return re},Yu:function(){return $},GP:function(){return S}});var k=n(10971),C=n(69076),H=["https://livedb.asoulfan.com","https://raw.githubusercontent.com/peterpei1186861238/A-Soul-Database/main","https://cdn.jsdelivr.net/gh/peterpei1186861238/A-Soul-Database@latest"],Y=0;L.ZP={RunOnLocal:Y!==0,sourceUrl:H[Y]};var X=["scene","staff","type"];function Q(s,r){{var c=new Set,_=(0,C.Z)(r.staff),J;try{for(_.s();!(J=_.n()).done;){var o=J.value;if(o!=="F"){var A=(0,C.Z)(r.skin[o]),U;try{for(A.s();!(U=A.n()).done;){var se=U.value;c.add(se)}}catch(E){A.e(E)}finally{A.f()}}}}catch(E){_.e(E)}finally{_.f()}var b=Array.from(c);if(b.length!==0&&!j(s.skin,b))return!1}if(s.platform.indexOf(r.platform)===-1)return!1;var R=(0,C.Z)(X),z;try{for(R.s();!(z=R.n()).done;){var q=z.value;if(!j(s[q],r[q]))return!1}}catch(E){R.e(E)}finally{R.f()}if(s.titlestr===""&&s.tagstr===""&&s.typestr===""||r.title.toLowerCase().indexOf(s.titlestr.toLowerCase())!==-1)return!0;{var y=(0,C.Z)(r.tags),K;try{for(y.s();!(K=y.n()).done;){var ee=K.value;if(ee.toLowerCase().indexOf(s.tagstr.toLowerCase())!==-1)return!0}}catch(E){y.e(E)}finally{y.f()}}{var Z=(0,C.Z)(r.items),V;try{for(Z.s();!(V=Z.n()).done;){var te=V.value,I=(0,C.Z)(te.item),F;try{for(I.s();!(F=I.n()).done;){var ne=F.value;if(ne[0].toLowerCase().indexOf(s.typestr.toLowerCase())!==-1)return!0}}catch(E){I.e(E)}finally{I.f()}}}catch(E){Z.e(E)}finally{Z.f()}}return!1}function re(s){var r=new XMLHttpRequest;r.open("GET",s,!1),r.send(null);var c;try{c=JSON.parse(r.responseText)}catch(_){c={title:"error"}}finally{return c}}function $(s){var r=new XMLHttpRequest;r.open("GET",s,!1),r.send(null);var c;try{c=r.responseText}catch(_){c="error http"}finally{return c}}function S(s){for(var r=[],c=s.length-1;c>=0;c--)r.push(s[c]);return r}function j(s,r){return s.length+r.length!==Array.from(new Set([].concat((0,k.Z)(s),(0,k.Z)(r)))).length}},31549:function(ue,L,n){"use strict";n.r(L);var k=n(15629),C=n(55778),H=n(906),Y=n(52645),X=n(91298),Q=n(69076),re=n(14013),$=n(41023),S=n(51548),j=n(46893),s=n(37150),r=n(65473),c=n(17051),_=n(4701),J=n(52916),o=n(34636),A=n(6575),U=n(9962),se=n(76664),b=n(52212),R=n(77981),z=n(98478),q=n(97594),y=n(8238),K=n(59301),ee=n(46794),Z=n(54348),V=n(18999),te=n(89122),I=n(14687),F=n(18422),ne=n(60775),E=n.n(ne),x=n(37141),ce=n(52379),he=n(26710),e=n(37712),ye=y.Z.Group,Ze=z.Z.Panel,Ie=b.Z.Meta,ae=U.Z.Title,ve=U.Z.Text,W=x.ZP.sourceUrl,Ee=(0,x.VO)(W+"/db/2021/search.json"),P=(0,x.VO)(W+"/db/2021/main.json"),fe=(0,x.VO)(W+"/db/2021/indexer.json"),De="yellow";function pe(h){var f=fe.indexOf(h);if(P[f].bv!=h)return console.error("indexer.json don't match mainJson in bv fileds, index: "+f),new Array;var d=1,u="";try{d=parseInt(P[f].clip),u=P[f].date.split("-")[0]}catch(N){console.error("clip and month parse fault in bv: "+h)}if(u===""||d===0)return new Array;u.length===1&&(u="0"+u);for(var t=new Array(d),l=0;l<d;l++)t[l]=[];if(d===1){var a="",i=W+"/db/2021/"+u+"/srt/"+h+".srt";try{a=(0,x.Yu)(i)}catch(N){return console.error("Get subtitles fault on url: "+i),t[0].push("||"),t}for(var p=a.split(`
`),D=0;D<p.length-2;D+=4){var O=p[D]+"|"+p[D+1]+"|"+p[D+2];t[0].push(O)}}else for(var v=1;v<d+1;v++){var M="",g=W+"/db/2021/"+u+"/srt/"+h+"-"+v.toString()+".srt";try{M=(0,x.Yu)(g)}catch(N){console.error("Get subtitles fault on url: "+g),t[v-1].push("||");continue}for(var T=M.split(`
`),m=0;m<T.length-2;m+=4){var w=T[m]+"|"+T[m+1]+"|"+T[m+2];t[v-1].push(w)}}return t}var G=[];for(var B in P){var le=void 0,oe=void 0,ie=void 0,_e=void 0;try{le=P[B].title,oe=P[B].bv,ie=P[B].date,_e=P[B].time}catch(h){console.error("mainJson parse fault for n: "+B)}G.push({key:B,date:ie,hour:_e,bv:oe,title:le})}G=(0,x.GP)(G);var me=[{title:"\u65E5\u671F",width:80,dataIndex:"date"},{title:"\u65F6\u95F4",width:80,dataIndex:"hour"},{title:"BV\u53F7",width:80,dataIndex:"bv",render:function(f){return(0,e.jsx)("a",{href:"https://www.bilibili.com/"+f,target:"_blank",onClick:function(u){u.stopPropagation()},children:f})}},{title:"\u6807\u9898",dataIndex:"title",render:function(f){return(0,e.jsx)(_.Z,{children:(0,e.jsx)(o.Z,{md:12,children:f})})}}],Ce=function(h){(0,s.Z)(d,h);var f=(0,r.Z)(d);function d(u){var t;return(0,S.Z)(this,d),t=f.call(this,u),t.state={input:""},t.handleSearch=function(l){t.props.parent.handleSearch(t.state.input)},t.handleClear=function(l){t.setState({input:""});var a=t.props.parent.props.initDatasrc;t.props.parent.setState({dataSource:a,searchWords:"",currentID:0})},t.handleReverse=function(l){t.props.parent.handleReverse()},t}return(0,j.Z)(d,[{key:"render",value:function(){var t=this;return(0,e.jsxs)(b.Z,{onKeyDown:function(a){a.keyCode===13&&t.handleSearch(a)},actions:[(0,e.jsx)(Z.Z,{title:"\u9006\u5E8F",onClick:this.handleReverse}),(0,e.jsx)(V.Z,{title:"\u6E05\u9664\u9009\u62E9",onClick:this.handleClear}),(0,e.jsx)(te.Z,{title:"\u641C\u7D22",onClick:this.handleSearch})],children:[(0,e.jsx)(_.Z,{children:(0,e.jsx)(o.Z,{xs:24,md:24,align:"middle",children:(0,e.jsx)(ae,{level:2,children:"\u5B57\u5E55\u5E93\u68C0\u7D22"})})}),(0,e.jsxs)(_.Z,{style:{height:"50px"},children:[(0,e.jsx)(o.Z,{xs:0,md:6}),(0,e.jsx)(o.Z,{xs:24,md:12,align:"middle",children:(0,e.jsx)($.Z,{style:{borderRadius:"50px"},placeholder:"\u5355\u6761\u5B57\u5E55\u68C0\u7D22\u{1F50D}",onChange:function(a){t.setState({input:a.target.value})},value:this.state.input})}),(0,e.jsx)(o.Z,{md:6,align:"middle"})]})]})}}]),d}(K.Component),xe=function(h){(0,s.Z)(d,h);var f=(0,r.Z)(d);function d(u){var t;return(0,S.Z)(this,d),t=f.call(this,u),t.state={dataSource:t.props.initDatasrc,isModalVisible:!1,displayBV:"",searchWords:"",currentID:0},t.handleCancel=function(){t.scrollTop(),t.setState({isModalVisible:!1,currentID:0})},t.handleSearch=function(l){t.setState({searchWords:l});var a=[],i=(0,Q.Z)(t.props.initDatasrc),p;try{for(i.s();!(p=i.n()).done;){var D=p.value,O=D.bv,v=void 0;try{v=Ee[O].srt}catch(M){continue}v.toLowerCase().indexOf(l.toLowerCase())!==-1&&a.push(D)}}catch(M){i.e(M)}finally{i.f()}t.setState({dataSource:a})},t.scrollTop=function(){var l=document.getElementById("Table-top");l.scrollIntoView({behavior:"auto"})},t.scrollNext=function(l){var a=document.getElementsByClassName(l);if(a.length!==0){var i=t.state.currentID;a[i].scrollIntoView({behavior:"smooth"}),i>=a.length-1?t.setState({currentID:0}):t.setState({currentID:i+1})}},t.scrollPre=function(l){var a=document.getElementsByClassName(l);if(a.length!=0){var i=t.state.currentID;a[i].scrollIntoView({behavior:"smooth"}),i<=0?t.setState({currentID:a.length-1}):t.setState({currentID:i-1})}},t}return(0,j.Z)(d,[{key:"handleReverse",value:function(){var t=(0,x.GP)(this.state.dataSource);this.setState({dataSource:t})}},{key:"render",value:function(){var t=this,l=this.state,a=l.isModalVisible,i=l.displayBV,p=l.searchWords,D=[];return i!==""&&(D=pe(i)),(0,e.jsxs)(ee.ZP,{children:[(0,e.jsx)(Ce,{parent:this}),(0,e.jsx)(_.Z,{style:{marginTop:"20px"},children:(0,e.jsx)(o.Z,{xs:24,md:24,children:(0,e.jsx)(ce.ZP,{columns:this.props.initColumns,rowKey:"key",dataSource:this.state.dataSource,search:!1,onRow:function(v){return{onClick:function(g){t.setState({isModalVisible:!0,displayBV:v.bv})},style:{cursor:"pointer"}}}})})}),(0,e.jsxs)(X.Z,{id:"modal",visible:a,maskClosable:!0,onCancel:this.handleCancel,footer:null,children:[(0,e.jsx)(_.Z,{children:(0,e.jsx)(o.Z,{xs:24,md:24,align:"middle",children:(0,e.jsx)(ae,{children:"\u5B57\u5E55\u8868"})})}),(0,e.jsx)(_.Z,{children:(0,e.jsx)(o.Z,{children:(0,e.jsxs)("a",{onClick:function(){return t.scrollPre("active-highlight")},children:[(0,e.jsx)(I.Z,{}),"\u4E0A\u4E00\u6761\u641C\u7D22\u7ED3\u679C"]})})}),(0,e.jsx)(_.Z,{children:(0,e.jsx)(o.Z,{children:(0,e.jsxs)("a",{onClick:function(){return t.scrollNext("active-highlight")},children:[(0,e.jsx)(F.Z,{}),"\u4E0B\u4E00\u6761\u641C\u7D22\u7ED3\u679C"]})})}),(0,e.jsxs)(_.Z,{children:[(0,e.jsx)(o.Z,{xs:3,md:3,children:"\u5E8F\u53F7"}),(0,e.jsx)(o.Z,{xs:10,md:10,children:"\u65F6\u95F4"}),(0,e.jsx)(o.Z,{xs:11,md:11,children:"\u5B57\u5E55"})]}),(0,e.jsx)(_.Z,{style:{borderBottom:"2px solid"},children:(0,e.jsx)(ve,{type:"secondary",children:"\u5B57\u5E55\u641C\u7D22\u7ED3\u679C\u4F1A\u4EE5\u9AD8\u4EAE\u5C55\u793A\uFF0C\u7528\u6309\u952E\u4E0A\u4E0B\u79FB\u52A8\u5427\u{1F483}\u{1F483}\u{1F483}"})}),(0,e.jsx)(_.Z,{children:(0,e.jsx)(o.Z,{span:24,style:{height:"500px",overflowY:"scroll"},children:D.map(function(O,v){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(_.Z,{children:(0,e.jsx)(o.Z,{style:{color:"#9AC8E2",borderBottom:"1px solid"},id:"Table-top",children:(0,e.jsx)("a",{target:"_blank",href:"https://www.bilibili.com/"+i+"?p="+(v+1),children:"\u5207\u7247"+(v+1)})})}),(0,e.jsx)(e.Fragment,{children:O.map(function(M){var g=M.split("|"),T=g[0],m=g[1],w=g[2],N=parseInt(m.split("-->")[0].split(":")[0]),Pe=parseInt(m.split("-->")[0].split(":")[1]),Oe=parseInt(m.split("-->")[0].split(":")[2].split(",")[0]),Me=(N*3600+60*Pe+Oe)*1e3,ge="https://www.bilibili.com/"+i+"?p="+(v+1)+"&start_progress="+Me,de="";return w.toLowerCase().indexOf(p.toLowerCase())!==-1&&(de="active-highlight"),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(_.Z,{style:{borderBottom:"1px dashed"},className:de,children:[(0,e.jsx)(o.Z,{xs:3,md:3,style:{color:"#B8A6D9"},children:T}),(0,e.jsx)(o.Z,{xs:10,md:10,children:(0,e.jsx)("a",{target:"_blank",href:ge,children:m})}),(0,e.jsx)(o.Z,{xs:11,md:11,style:{color:"#E799B0"},children:(0,e.jsx)(E(),{highlightStyle:{backgroundColor:De,padding:0},searchWords:[p],autoEscape:!0,textToHighlight:w})})]})})})})]})})})})]})]})}}]),d}(K.Component);L.default=function(){var h={initColumns:me,initDatasrc:G};return(0,e.jsx)(C.ZP,{locale:he.Z,children:(0,e.jsx)(xe,(0,H.Z)({},h))})}}}]);
